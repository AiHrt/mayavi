<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.5: http://docutils.sourceforge.net/" />
<title></title>
<style type="text/css">

/* CSS for MayaVi2. Based upon the default docutils CSS.
 *
 * defaults.css is included with some modifications. 
 * Majors changes are added at the end.
 * We don't use the 'use' css instruction to avoid having a second file.
 */

/*
:Author: David Goodger
:Contact: goodger@users.sourceforge.net
:Date: $Date: 2005-09-08 09:54:28 +0100 (Thu, 08 Sep 2005) $
:Version: $Revision: 123 $
:Copyright: This stylesheet has been placed in the public domain.

Default cascading style sheet for the HTML output of Docutils.
*/

/* "! important" is used here to override other ``margin-top`` and
   ``margin-bottom`` styles that are later in the stylesheet or 
   more specific.  See http://www.w3.org/TR/CSS1#the-cascade */
.first {
  margin-top: 0 ! important }

.last, .with-subtitle {
  margin-bottom: 0 ! important }

.hidden {
  display: none }

a.toc-backref {
  text-decoration: none ;
  color: black }

blockquote.epigraph {
  margin: 2em 5em ; }

dl.docutils dd {
  margin-bottom: 0.5em }

/* Uncomment (and remove this text!) to get bold-faced definition list terms
dl.docutils dt {
  font-weight: bold }
*/

div.abstract {
  margin: 2em 5em }

div.abstract p.topic-title {
  font-weight: bold ;
  text-align: center }

div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em ;
  border: medium outset ;
  padding: 1em }

div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title {
  font-weight: bold ;
  font-family: sans-serif }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title {
  color: red ;
  font-weight: bold ;
  font-family: sans-serif }

div.compound .compound-first, div.compound .compound-middle {
  margin-bottom: 0.5em }

div.compound .compound-last, div.compound .compound-middle {
  margin-top: 0.5em }

div.dedication {
  margin: 2em 5em ;
  text-align: center ;
  font-style: italic }

div.dedication p.topic-title {
  font-weight: bold ;
  font-style: normal }

div.figure {
  margin: 0 auto 0 auto ; 
  padding: 0 auto 0 auto ;}

div.footer, div.header {
  clear: both;
  font-size: smaller }

div.line-block {
  display: block ;
  margin-top: 1em ;
  margin-bottom: 1em }

div.line-block div.line-block {
  margin-top: 0 ;
  margin-bottom: 0 ;
  margin-left: 1.5em }

div.sidebar {
  margin-left: 1em ;
  border: medium outset ;
  padding: 1em ;
  background-color: #ffffee ;
  width: 40% ;
  float: right ;
  clear: right }

div.sidebar p.rubric {
  font-family: sans-serif ;
  font-size: medium }

div.system-messages {
  margin: 5em }

div.system-messages h1 {
  color: red }

div.system-message {
  border: medium outset ;
  padding: 1em }

div.system-message p.system-message-title {
  color: red ;
  font-weight: bold }

div.topic {
  margin: 2em }

h1.section-subtitle, h2.section-subtitle, h3.section-subtitle,
h4.section-subtitle, h5.section-subtitle, h6.section-subtitle {
  margin-top: 0.4em }

h1.title {
  text-align: center }

h2.subtitle {
  text-align: center }

/*hr.docutils {
  width: 75% }*/

img.align-left {
  clear: left }

img.align-right {
  clear: right }

img.borderless {
  border: 0 }

ol.simple, ul.simple {
  margin-bottom: 1em }

ol.arabic {
  list-style: decimal }

ol.loweralpha {
  list-style: lower-alpha }

ol.upperalpha {
  list-style: upper-alpha }

ol.lowerroman {
  list-style: lower-roman }

ol.upperroman {
  list-style: upper-roman }

p.attribution {
  text-align: right ;
  margin-left: 50% }

p.caption {
  font-style: italic }

p.credits {
  font-style: italic ;
  font-size: smaller }

p.label {
  white-space: nowrap }

p.rubric {
  font-weight: bold ;
  font-size: larger ;
  color: maroon ;
  text-align: center }

p.sidebar-title {
  font-family: sans-serif ;
  font-weight: bold ;
  font-size: larger }

p.sidebar-subtitle {
  font-family: sans-serif ;
  font-weight: bold }

p.topic-title {
  font-weight: bold }

pre.address {
  margin-bottom: 0 ;
  margin-top: 0 ;
  font-family: serif ;
  font-size: 100% }

/*pre.line-block {
  font-family: serif ;
  font-size: 100% }*/

pre.literal-block, pre.doctest-block {
  margin-left: 2em ;
  margin-right: 2em ;
  background-color: #eeeeee }

span.classifier {
  font-family: sans-serif ;
  font-style: oblique }

span.classifier-delimiter {
  font-family: sans-serif ;
  font-weight: bold }

span.interpreted {
  font-family: sans-serif }

span.option {
  white-space: nowrap }

span.pre {
  white-space: pre }

span.problematic {
  color: red }

span.section-subtitle {
  /* font-size relative to parent (h1..h6 element) */
  font-size: 80% }

table.citation {
  border-left: solid thin gray }

table.docinfo {
  margin: 2em 4em }

table.docutils {
  margin-top: 0.5em ;
  margin-bottom: 0.5em }

table.footnote {
  border-left: solid thin black }

table.docutils td, table.docutils th,
table.docinfo td, table.docinfo th {
  padding-left: 0.5em ;
  padding-right: 0.5em ;
  vertical-align: top }

table.docutils th.field-name, table.docinfo th.docinfo-name {
  font-weight: bold ;
  text-align: left ;
  white-space: nowrap ;
  padding-left: 0 }

h1 tt.docutils, h2 tt.docutils, h3 tt.docutils,
h4 tt.docutils, h5 tt.docutils, h6 tt.docutils {
  font-size: 100% }

/*tt.docutils {
  background-color: #eeeeee }*/

ul.auto-toc {
  list-style-type: none }

/********************* MayaVi modifications ********************************/

body {
    max-width: 79ex ; /* Not recognized by IE, but ... */
    margin: 1px auto 1px auto ;
    text-align: justify ;
}

a:visited { color: #EF7811 ; text-decoration: none; font-weight:700; }
a:link { color: #9b4e00; text-decoration: none; font-weight: 700; }
a:hover { color: #EF7811; text-decoration: underline; font-weight: 700; }
/* Internal links */
a.toc-backref { color: #643200 ; text-decoration: none ;}

h1 {
    font-size: xx-large ;
    color : #3c0a00 ;
    border-color : #3c0a00 ;
    color: #643200 ;
    border-color: #643200 ;
    border-width: 0 0 3px 0 ;
    border-style: solid ;
    padding : 0 0 0 1ex ;
    font-family: sans-serif ; 
}


h2 {
    font-size: x-large ;
    padding : 0 0 0 3ex ;
    color: #643200 ;
    border-color: #643200 ;
    border-width: 0 0 2px 0 ;
    border-style: solid ;
    font-family: sans-serif ; 
}

/* An attempt to make list bullets orange */
.contents li: { color: orange; }
/*li p { color: black; }*/

/* Code : */
pre.literal-block {
    color: #333 ;
    background-color: #f2eac0;
    background-repeat: repeat-y;
    background-position:  right;
    border: 1px solid;
    border-color: #999999;
    margin: 0 2em 0 2em ;
    padding: 1px;
}

div.warning {
    margin: 2em ;
    border-width: 0 0 0 0 ;
    color: #660000 ;
    padding: 0 1em 0.5em 1em }

div.warning p.admonition-title {
    margin : 0 ;
    padding: 0 ;
    color: #ee0000 ;
    border-width : 0 0 1px 0 ;
    border-style: solid ;
}

div.warning p.last {
    color: #660000 ;
    margin : 0.5ex 2px 2px 2px ;
    padding: 0 ;
    border-width: 0 0 1px 0 ;
    border-style: solid ;
    border-color: #660000 ;
}

div.topic {
    color: #444 ;
    border-width : 0 0 1px 0 ;
    border-style: solid ;
    background-color: white ;
    font-family: sans-serif ;
}

div.topic p {
    margin: 1px 1em 1px 1em ;
    font-size: smaller ;
}

div.topic p.topic-title {
    font-size: larger ;
    border-width : 0 0 1px 0 ;
    border-style: solid;
    margin: 0 0 2px 0 ;
    background-color: #f9f9f9 ;
}

blockquote.epigraph {
/*    font-size: smaller ;*/
    font-family: sans-serif ;
    font-weight : 500 ;
    padding : 0.5ex 2ex 0.5ex 5ex ;
    margin: 2px 1ex 2px 1ex ; 
    background-color: white ;
    border: solid #e3e3e3 ;
    border-width : 1px ;
    background-image: url("quotes.png");
    background-repeat: no-repeat;
    /*background-position:  right;*/
}

blockquote.highlights {
    font-size: smaller ;
    font-family: sans-serif ;
    font-weight : 600 ;
    border : solid #CCCCCC;
    border-width : 0 0 0 10px ;
    padding : 0 0 0 1ex ;
}


div.navigation {
    font-size: larger ;
    background-color: black ;
    color: #f9f9f9 ;
    padding: 0px 4px 4px 4px; 
    background-image: url("images/mayavi2-48x48.png");
    background-repeat: no-repeat;
    background-position:  right;
}

a.navigation { 
    color: #EF7811 ; text-decoration: none; font-weight:900; 
    padding: 0px 10px 2px 2px; }
a.navigation:visited { 
    color: #EF7811 ; text-decoration: none; font-weight:900; 
    padding: 0px 10px 2px 2px; }
a.navigation:link { 
    color: #FF8821; text-decoration: none; font-weight: 900; 
    padding: 0px 10px 2px 2px; }
a.navigation:hover { 
    color: #EF7811; text-decoration: underline; font-weight: 900; 
    padding: 0px 10px 2px 2px; }

/* The home-made toc */
div.toc0 { padding: 10px 1px 1px 0em ; font-family: sans-serif ;}
div.toc1 { padding: 1px 2px 1px 2em ; font-family: sans-serif ;}
div.toc2 { padding: 1px 2px 1px 4em ; font-family: sans-serif ;}
a.toc0  { 
    font-size: large ; font-weight: 700 ;
    font-family: sans-serif ;}
a.toc0:visited { 
    font-size: large ; font-weight: 700 ;
    font-family: sans-serif ;}
a.toc0:link { 
    font-size: large ; font-weight: 700 ;
    font-family: sans-serif ;}
a.toc0:hover { 
    font-size: large ; font-weight: 700 ;
    font-family: sans-serif ;}

</style>
</head>
<body>
<div class="document">


<div class=navigation>
<a class='navigation' href='user_guide.html'>
<img src="images/previous.png" border=0>
Up </a> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<a class='navigation' href='user_guide.html'><img src="images/go-up.png" border=0>
Top Level</a>
</div><hr class="docutils" />
<div class="section" id="simple-scripting-with-mlab">
<h1>Simple Scripting with <tt class="docutils literal"><span class="pre">mlab</span></tt></h1>
<p>The <tt class="docutils literal"><span class="pre">enthought.mayavi.mlab</span></tt> module, that we call mlab, provides quick
one-liners as done in the <a class="reference external" href="http://matplotlib.sf.net">matplotlib</a> <tt class="docutils literal"><span class="pre">pylab</span></tt> interface but with an
emphasis on 3D visualization using Mayavi2.  This allows users to perform
quick 3D visualization while being able to use Mayavi's powerful
features.</p>
<p>Mayavi's mlab is designed to be used in a manner well suited to
scripting and does not present a fully object-oriented API (this is
similar to matplotlib's <tt class="docutils literal"><span class="pre">pylab</span></tt>).  It is best used interactively with
<a class="reference external" href="http://ipython.scipy.org">IPython</a>.  IPython must be invoked with the <tt class="docutils literal"><span class="pre">-wthread</span></tt> command line
option like so:</p>
<pre class="literal-block">
$ ipython -wthread
</pre>
<div class="section" id="a-demo">
<h2>A demo</h2>
<p>Once started, here is a pretty example showing a spherical harmonic:</p>
<pre class="literal-block">
from numpy import *
from enthought.mayavi import mlab
# Create the data.
dphi, dtheta = pi/250.0, pi/250.0
[phi,theta] = mgrid[0:pi+dphi*1.5:dphi,0:2*pi+dtheta*1.5:dtheta]
m0 = 4; m1 = 3; m2 = 2; m3 = 3; m4 = 6; m5 = 2; m6 = 6; m7 = 4;
r = sin(m0*phi)**m1 + cos(m2*phi)**m3 + sin(m4*theta)**m5 + cos(m6*theta)**m7
x = r*sin(phi)*cos(theta)
y = r*cos(phi)
z = r*sin(phi)*sin(theta);
# View it.
f = mlab.figure()
s = mlab.mesh(x, y, z)
</pre>
<p>Bulk of the code in the above example is to create the data.  One line
suffices to visualize it.  This produces the following visualization
in a Mayavi window.</p>
<img alt="images/mlab_surf_example.jpg" src="images/mlab_surf_example.jpg" />
<p>The data and visualization modules are all created by the single
command <tt class="docutils literal"><span class="pre">mesh</span></tt> in the above.</p>
</div>
<div class="section" id="plotting">
<h2>Plotting</h2>
<p>The mlab plotting functions take numpy arrays as input, describing the
<tt class="docutils literal"><span class="pre">x</span></tt>, <tt class="docutils literal"><span class="pre">y</span></tt>, and <tt class="docutils literal"><span class="pre">z</span></tt> coordinates of the data. They build full-blown
visualizations: they create the data source, filters if necessary, and
add the visualization modules. Their behavior, and thus the visualization
created, can be fine-tuned through keyword arguments, similarly to pylab.
In addition, they all return the visualization module created, thus
visualization can also be modified by changing the attributes of this
module.</p>
<blockquote>
<dl class="docutils">
<dt>0D and 1D data</dt>
<dd>The <a class="reference external" href="auto_mlab_plot3d.html#plot3d">plot3d</a> and <a class="reference external" href="auto_mlab_points3d.html#points3d">points3d</a> are respectively used to draw lines, and
sets of points, specifying the <tt class="docutils literal"><span class="pre">x</span></tt>, <tt class="docutils literal"><span class="pre">y</span></tt> and <tt class="docutils literal"><span class="pre">z</span></tt> coordinates as
numpy arrays.</dd>
<dt>2D data</dt>
<dd><p class="first">A 2D array can be shown as a image using <a class="reference external" href="auto_mlab_imshow.html#imshow">imshow</a>, or as a surface with
the elevation given by its values with <a class="reference external" href="auto_mlab_surf.html#surf">surf</a>. The contours (lines) of
same values can be plotted using <a class="reference external" href="auto_mlab_contour_surf.html#contour-surf">contour_surf</a>.</p>
<p class="last">The <a class="reference external" href="auto_mlab_mesh.html#mesh">mesh</a> function also creates surfaces, however, unlike <a class="reference external" href="auto_mlab_surf.html#surf">surf</a>,
the surface is defined by its <tt class="docutils literal"><span class="pre">x</span></tt>, <tt class="docutils literal"><span class="pre">y</span></tt> and <tt class="docutils literal"><span class="pre">z</span></tt> coordinates, and
more complex surfaces can be created, as in the above example.</p>
</dd>
<dt>3D data</dt>
<dd>To plot isosurfaces of a 3D scalar field use <a class="reference external" href="auto_mlab_contour3d.html#contour3d">contour3d</a>. A
vector field can be represented using <a class="reference external" href="auto_mlab_quiver3d.html#quiver3d">quiver3d</a>, and the
trajectories of particles along this field can plotted using <a class="reference external" href="auto_mlab_flow.html#flow">flow</a>.</dd>
</dl>
</blockquote>
</div>
<div class="section" id="handling-figures">
<h2>Handling figures</h2>
<p>All mlab functions operate on the current scene, that we also call
<a class="reference external" href="auto_mlab_figure.html#figure">figure</a>, for compatibility with matlab and pylab. The different
figures are indexed by key that can be an integer or a string. A call to
the <a class="reference external" href="auto_mlab_figure.html#figure">figure</a> function giving a key will either return the corresponding
figure, if it exists, or create a new one. The current figure can be
retrieved with the <a class="reference external" href="auto_mlab_gcf.html#gcf">gcf</a> function. It can be refreshed using the
<a class="reference external" href="auto_mlab_draw.html#draw">draw</a> function, saved to a picture file using <a class="reference external" href="auto_mlab_savefig.html#savefig">savefig</a> and cleared
using <a class="reference external" href="auto_mlab_clf.html#clf">clf</a>.</p>
</div>
<div class="section" id="figure-decorations">
<h2>Figure decorations</h2>
<p>Axes can be added around a visualization object with the <a class="reference external" href="auto_mlab_axes.html#axes">axes</a>
function, and the labels can be set using the <a class="reference external" href="auto_mlab_xlabel.html#xlabel">xlabel</a>, <a class="reference external" href="auto_mlab_ylabel.html#ylabel">ylabel</a> and
<a class="reference external" href="auto_mlab_zlabel.html#zlabel">zlabel</a> functions. Similarly, <a class="reference external" href="auto_mlab_outline.html#outline">outline</a> creates an outline around an
object. <a class="reference external" href="auto_mlab_title.html#title">title</a> adds a title to the figure.</p>
<p>Color bars can be used to reflect the color maps used to display values
(LUT, or lookup tables, in VTK parlance). <a class="reference external" href="auto_mlab_colorbar.html#colorbar">colorbar</a> creates a color bar
for the last object created, trying to guess whether to use the vector
data or the scalar data color maps. The <a class="reference external" href="auto_mlab_scalarbar.html#scalarbar">scalarbar</a> and <a class="reference external" href="auto_mlab_vectorbar.html#vectorbar">vectorbar</a>
function scan be used to create color bars specifically for scalar or
vector data.</p>
</div>
<div class="section" id="moving-the-camera">
<h2>Moving the camera</h2>
<p>The position and direction of the camera can be set using the <a class="reference external" href="auto_mlab_view.html#view">view</a>
function. They are described in terms of Euler angles and distance to a
focal point. The <a class="reference external" href="auto_mlab_view.html#view">view</a> function tries to guess the right roll angle of
the camera for a pleasing view, but it sometimes fails. The <a class="reference external" href="auto_mlab_roll.html#roll">roll</a>
explicitly sets the roll angle of the camera.</p>
</div>
<div class="section" id="interacting-graphically-with-the-visualization">
<h2>Interacting graphically with the visualization</h2>
<p>The Mayavi pipeline tree can be displayed using <a class="reference external" href="auto_mlab_show_engine.html#show-engine">show_engine</a> command.
One can now change the visualization using this dialog by
double-clicking on each object to edit its properties, as described in
other parts of this manual.</p>
<p>In addition, for every object returned by a mlab function,
<tt class="docutils literal"><span class="pre">this_object.edit_traits()</span></tt> brings up a dialog that can be used to
interactively edit the object's properties.</p>
</div>
<div class="section" id="running-mlab-scripts">
<h2>Running Mlab scripts</h2>
<div class="section" id="interactively">
<h3>Interactively</h3>
<p>Using <a class="reference external" href="http://ipython.scipy.org">IPython</a> mlab instructions can be run interactively, or in
scripts using <a class="reference external" href="http://ipython.scipy.org">IPython</a>'s <tt class="docutils literal"><span class="pre">%run</span></tt> command.</p>
<p>Mlab can also be used interactively in the Python shell of the mayavi2
application, or in any interactive Python shell of wxPython-based
application (such as other Envisage-based applications, or Stani's
Python editor).</p>
</div>
<div class="section" id="as-batch-scripts">
<h3>As batch scripts</h3>
<p>Mlab commands can be written to a file, to form a script. This script
can be loaded in the Mayavi application using the <em>File-&gt;Open file</em> menu
entry, and executed using the <em>File-&gt;Refresh code</em> menu entry or by
pressing <tt class="docutils literal"><span class="pre">Control-r</span></tt>.  It can also be executed during the start of the
Mayavi application using the <tt class="docutils literal"><span class="pre">-x</span></tt> command line switch.</p>
<p>You can also make your mlab script a normal Python script, that can be
run with <tt class="docutils literal"><span class="pre">python</span> <span class="pre">my_script.py</span></tt> by adding the following lines at the end
of your script:</p>
<pre class="literal-block">
from enthought.pyface.api import GUI
GUI().start_event_loop()
</pre>
<p>Don't do this when running it in an interactive environment, as it will
freeze your environment.</p>
<!-- Local Variables:
mode: rst
indent-tabs-mode: nil
sentence-end-double-space: t
fill-column: 70
End: -->
<br><div class=navigation>
<a class='navigation' href='user_guide.html'>
<img src="images/previous.png" border=0>
Up </a> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<a class='navigation' href='user_guide.html'><img src="images/go-up.png" border=0>
Top Level</a>
</div></div>
</div>
</div>
</div>
</body>
</html>
