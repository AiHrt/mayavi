

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>mlab: Python scripting for 3D plotting &mdash; mayavi 4.3.1 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '4.3.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="mayavi 4.3.1 documentation" href="index.html" />
    <link rel="next" title="Advanced use of Mayavi" href="advanced_use.html" />
    <link rel="prev" title="Filters" href="filters.html" />
<style type="text/css">
  body {
    /* Very bottom copyright, etc. info */
    background: #4d598d;
  }

  .documentwrapper {
    /* Blank area on left bar */
    background: #24326e;
  }

  .related {
    /* Long horizontal nav bars */
    background: #3c4b8a!important;
  }

  .sphinxsidebarwrapper {
    /* Filled part of left sidebar */
    background: #24326e;
  }

  a {
    color: #253370;
  }

  .sphinxsidebarwrapper a {
    color: #f2f2f2!important;
  }
</style>

  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="advanced_use.html" title="Advanced use of Mayavi"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="filters.html" title="Filters"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">mayavi 4.3.1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="mlab-python-scripting-for-3d-plotting">
<span id="simple-scripting-with-mlab"></span><h1><tt class="docutils literal"><span class="pre">mlab</span></tt>: Python scripting for 3D plotting<a class="headerlink" href="#mlab-python-scripting-for-3d-plotting" title="Permalink to this headline">¶</a></h1>
<div class="topic">
<p class="topic-title first">Section summary</p>
<p>This section describes the <cite>mlab</cite> API, for use of Mayavi as a simple
plotting in scripts or interactive sessions. This is the main entry
point for people interested in doing 3D plotting à la Matlab or IDL
in Python. If you are interested in a list of all the
functions exposed in mlab, see the <a class="reference internal" href="auto/mlab_reference.html#mlab-reference"><em>MLab reference</em></a>.</p>
</div>
<p>The <a class="reference internal" href="auto/mlab_reference.html#module-mayavi.mlab" title="mayavi.mlab"><tt class="xref py py-mod docutils literal"><span class="pre">mayavi.mlab</span></tt></a> module, that we call mlab, provides an easy
way to visualize data in a script or from an interactive prompt with
one-liners as done in the <a class="reference external" href="http://matplotlib.sf.net">matplotlib</a> <tt class="docutils literal"><span class="pre">pylab</span></tt> interface but with an
emphasis on 3D visualization using Mayavi2. This allows users to perform
quick 3D visualization while being able to use Mayavi&#8217;s powerful
features.</p>
<p>Mayavi&#8217;s mlab is designed to be used in a manner well-suited to
scripting and does not present a fully object-oriented API.
It is can be used interactively with <a class="reference external" href="http://ipython.scipy.org">IPython</a>.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>When using IPython with mlab, as in the following examples, IPython must
be invoked with the <tt class="docutils literal"><span class="pre">-wthread</span></tt> command line option like so:</p>
<div class="highlight-python"><pre>$ ipython -wthread</pre>
</div>
<p>Or, for IPython recent version (0.11 and above):</p>
<div class="highlight-python"><pre>$ ipython --gui=wx</pre>
</div>
<p>If you are using the <a class="reference external" href="http://www.enthought.com/products/epd.php">Enthought Python Distribution</a>, or the latest
<a class="reference external" href="http://www.pythonxy.com">Python(x,y)</a> distribution, the Pylab menu
entry will start ipython with the right switch. In older release of
Python(x,y) you need to start &#8220;Interactive Console (wxPython)&#8221;.</p>
<p class="last">For more details on using mlab and running scripts, read the section
<a class="reference internal" href="mlab_running_scripts.html#running-mlab-scripts"><em>Running mlab scripts</em></a></p>
</div>
<p>In this section, we first introduce simple plotting functions, to create
3D objects as representations of <cite>numpy</cite> arrays. Then we explain how
properties such as color or glyph size can be modified or used to
represent data, we show how the visualization created through <cite>mlab</cite> can
be modified interactively with dialogs, we show how scripts and
animations can be ran. Finally, we expose a more advanced use of <cite>mlab</cite>
in which full visualization pipeline are built in scripts, and we give
some detailed examples of applying these tools to visualizing volumetric
scalar and vector data.</p>
<div class="contents local topic" id="section-contents">
<p class="topic-title first">Section contents</p>
<ul class="simple">
<li><a class="reference internal" href="#a-demo" id="id5">A demo</a></li>
<li><a class="reference internal" href="#d-plotting-functions-for-numpy-arrays" id="id6">3D Plotting functions for numpy arrays</a></li>
<li><a class="reference internal" href="#changing-the-looks-of-the-visual-objects-created" id="id7">Changing the looks of the visual objects created</a></li>
<li><a class="reference internal" href="#figures-legends-camera-and-decorations" id="id8">Figures, legends, camera and decorations</a></li>
<li><a class="reference internal" href="#running-mlab-scripts" id="id9">Running mlab scripts</a></li>
<li><a class="reference internal" href="#animating-the-data" id="id10">Animating the data</a></li>
<li><a class="reference internal" href="#assembling-pipelines-with-mlab" id="id11">Assembling pipelines with <cite>mlab</cite></a></li>
<li><a class="reference internal" href="#case-studies-of-some-visualizations" id="id12">Case studies of some visualizations</a></li>
</ul>
</div>
<div class="section" id="a-demo">
<span id="mlab-demo"></span><h2><a class="toc-backref" href="#id5">A demo</a><a class="headerlink" href="#a-demo" title="Permalink to this headline">¶</a></h2>
<p>To get you started, here is a pretty example showing a spherical harmonic
as a surface:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Create the data.</span>
<span class="kn">from</span> <span class="nn">numpy</span> <span class="kn">import</span> <span class="n">pi</span><span class="p">,</span> <span class="n">sin</span><span class="p">,</span> <span class="n">cos</span><span class="p">,</span> <span class="n">mgrid</span>
<span class="n">dphi</span><span class="p">,</span> <span class="n">dtheta</span> <span class="o">=</span> <span class="n">pi</span><span class="o">/</span><span class="mf">250.0</span><span class="p">,</span> <span class="n">pi</span><span class="o">/</span><span class="mf">250.0</span>
<span class="p">[</span><span class="n">phi</span><span class="p">,</span><span class="n">theta</span><span class="p">]</span> <span class="o">=</span> <span class="n">mgrid</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="n">pi</span><span class="o">+</span><span class="n">dphi</span><span class="o">*</span><span class="mf">1.5</span><span class="p">:</span><span class="n">dphi</span><span class="p">,</span><span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="o">*</span><span class="n">pi</span><span class="o">+</span><span class="n">dtheta</span><span class="o">*</span><span class="mf">1.5</span><span class="p">:</span><span class="n">dtheta</span><span class="p">]</span>
<span class="n">m0</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span> <span class="n">m1</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span> <span class="n">m2</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span> <span class="n">m3</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span> <span class="n">m4</span> <span class="o">=</span> <span class="mi">6</span><span class="p">;</span> <span class="n">m5</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span> <span class="n">m6</span> <span class="o">=</span> <span class="mi">6</span><span class="p">;</span> <span class="n">m7</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">sin</span><span class="p">(</span><span class="n">m0</span><span class="o">*</span><span class="n">phi</span><span class="p">)</span><span class="o">**</span><span class="n">m1</span> <span class="o">+</span> <span class="n">cos</span><span class="p">(</span><span class="n">m2</span><span class="o">*</span><span class="n">phi</span><span class="p">)</span><span class="o">**</span><span class="n">m3</span> <span class="o">+</span> <span class="n">sin</span><span class="p">(</span><span class="n">m4</span><span class="o">*</span><span class="n">theta</span><span class="p">)</span><span class="o">**</span><span class="n">m5</span> <span class="o">+</span> <span class="n">cos</span><span class="p">(</span><span class="n">m6</span><span class="o">*</span><span class="n">theta</span><span class="p">)</span><span class="o">**</span><span class="n">m7</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">r</span><span class="o">*</span><span class="n">sin</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span><span class="o">*</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">r</span><span class="o">*</span><span class="n">cos</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span>
<span class="n">z</span> <span class="o">=</span> <span class="n">r</span><span class="o">*</span><span class="n">sin</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span><span class="o">*</span><span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>

<span class="c"># View it.</span>
<span class="kn">from</span> <span class="nn">mayavi</span> <span class="kn">import</span> <span class="n">mlab</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">mlab</span><span class="o">.</span><span class="n">mesh</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">)</span>
<span class="n">mlab</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>Bulk of the code in the above example is to create the data.  One line
suffices to visualize it.  This produces the following visualization:</p>
<img alt="_images/mlab_surf_example.jpg" class="align-center" src="_images/mlab_surf_example.jpg" />
<p>The visualization is created by the single function <a class="reference internal" href="auto/mlab_helper_functions.html#mayavi.mlab.mesh" title="mayavi.mlab.mesh"><tt class="xref py py-func docutils literal"><span class="pre">mesh()</span></tt></a> in the above.</p>
<p>Several examples of this kind are provided with mlab (see
<cite>test_contour3d</cite>, <cite>test_points3d</cite>, <cite>test_plot3d_anim</cite> etc.).  The above
demo is available as <cite>test_mesh</cite>.  Under IPython these may be found by
tab completing on <cite>mlab.test</cite>.  You can also inspect the source in
IPython via the handy <cite>mlab.test_contour3d??</cite>.</p>
</div>
<div class="section" id="d-plotting-functions-for-numpy-arrays">
<span id="mlab-plotting-functions"></span><h2><a class="toc-backref" href="#id6">3D Plotting functions for numpy arrays</a><a class="headerlink" href="#d-plotting-functions-for-numpy-arrays" title="Permalink to this headline">¶</a></h2>
<p>Visualization can be created in <cite>mlab</cite> by a set of functions operating on
numpy arrays.</p>
<p>The mlab plotting functions take numpy arrays as input, describing the
<tt class="docutils literal"><span class="pre">x</span></tt>, <tt class="docutils literal"><span class="pre">y</span></tt>, and <tt class="docutils literal"><span class="pre">z</span></tt> coordinates of the data. They build full-blown
visualizations: they create the data source, filters if necessary, and
add the visualization modules. Their behavior, and thus the visualization
created, can be fine-tuned through keyword arguments, similarly to pylab.
In addition, they all return the visualization module created, thus
visualization can also be modified by changing the attributes of this
module.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In this section, we only list the different functions. Each function
is described in detail in the <a class="reference internal" href="auto/mlab_reference.html#mlab-reference"><em>MLab reference</em></a>, at the end of
the user guide, with figures and examples. Please follow the links.</p>
</div>
<div class="section" id="d-and-1d-data">
<h3>0D and 1D data<a class="headerlink" href="#d-and-1d-data" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="23%" />
<col width="77%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">&nbsp;</th>
<th class="head">&nbsp;</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><a class="reference internal" href="_images/enthought_mayavi_mlab_points3d1.jpg"><img alt="points3d" src="_images/enthought_mayavi_mlab_points3d1.jpg" style="width: 160.5px; height: 161.0px;" /></a></td>
<td><a class="reference internal" href="auto/mlab_helper_functions.html#mayavi.mlab.points3d" title="mayavi.mlab.points3d"><tt class="xref py py-func docutils literal"><span class="pre">points3d()</span></tt></a>
<br>
Plots glyphs (like points) at the position of the
supplied data, described by <tt class="docutils literal"><span class="pre">x</span></tt>, <tt class="docutils literal"><span class="pre">y</span></tt>, <tt class="docutils literal"><span class="pre">z</span></tt>
numpy arrays of the same shape.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="_images/enthought_mayavi_mlab_plot3d1.jpg"><img alt="plot3d" src="_images/enthought_mayavi_mlab_plot3d1.jpg" style="width: 153.0px; height: 113.0px;" /></a></td>
<td><a class="reference internal" href="auto/mlab_helper_functions.html#mayavi.mlab.plot3d" title="mayavi.mlab.plot3d"><tt class="xref py py-func docutils literal"><span class="pre">plot3d()</span></tt></a>
<br>
Plots line between the supplied data, described by <tt class="docutils literal"><span class="pre">x</span></tt>,
<tt class="docutils literal"><span class="pre">y</span></tt>, <tt class="docutils literal"><span class="pre">z</span></tt> 1D numpy arrays of the same length.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="d-data">
<h3>2D data<a class="headerlink" href="#d-data" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="23%" />
<col width="77%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">&nbsp;</th>
<th class="head">&nbsp;</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><a class="reference internal" href="_images/enthought_mayavi_mlab_imshow1.jpg"><img alt="imshow" src="_images/enthought_mayavi_mlab_imshow1.jpg" style="width: 200.0px; height: 129.0px;" /></a></td>
<td><a class="reference internal" href="auto/mlab_helper_functions.html#mayavi.mlab.imshow" title="mayavi.mlab.imshow"><tt class="xref py py-func docutils literal"><span class="pre">imshow()</span></tt></a>
<br>
View a 2D array as an image.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="_images/enthought_mayavi_mlab_surf1.jpg"><img alt="surf" src="_images/enthought_mayavi_mlab_surf1.jpg" style="width: 192.5px; height: 153.0px;" /></a></td>
<td><a class="reference internal" href="auto/mlab_helper_functions.html#mayavi.mlab.surf" title="mayavi.mlab.surf"><tt class="xref py py-func docutils literal"><span class="pre">surf()</span></tt></a>
<br>
View a 2D array as a carpet plot, with the z axis
representation through elevation the value of the
array points.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="_images/enthought_mayavi_mlab_contour_surf1.jpg"><img alt="contour_surf" src="_images/enthought_mayavi_mlab_contour_surf1.jpg" style="width: 200.0px; height: 145.0px;" /></a></td>
<td><a class="reference internal" href="auto/mlab_helper_functions.html#mayavi.mlab.contour_surf" title="mayavi.mlab.contour_surf"><tt class="xref py py-func docutils literal"><span class="pre">contour_surf()</span></tt></a>
<br>
View a 2D array as line contours, elevated
according to the value of the array points.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="_images/enthought_mayavi_mlab_mesh1.jpg"><img alt="mesh" src="_images/enthought_mayavi_mlab_mesh1.jpg" style="width: 136.0px; height: 120.0px;" /></a></td>
<td><a class="reference internal" href="auto/mlab_helper_functions.html#mayavi.mlab.mesh" title="mayavi.mlab.mesh"><tt class="xref py py-func docutils literal"><span class="pre">mesh()</span></tt></a>
<br>
Plot a surface described by three 2D arrays, <tt class="docutils literal"><span class="pre">x</span></tt>,
<tt class="docutils literal"><span class="pre">y</span></tt>, <tt class="docutils literal"><span class="pre">z</span></tt> giving the coordinates of the data points
as a grid.
<br>
Unlike <a class="reference internal" href="auto/mlab_helper_functions.html#mayavi.mlab.surf" title="mayavi.mlab.surf"><tt class="xref py py-func docutils literal"><span class="pre">surf()</span></tt></a>, the surface is defined by its
<tt class="docutils literal"><span class="pre">x</span></tt>, <tt class="docutils literal"><span class="pre">y</span></tt> and <tt class="docutils literal"><span class="pre">z</span></tt> coordinates with no privileged
direction. More complex surfaces can be created.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="_images/enthought_mayavi_mlab_barchart1.jpg"><img alt="barchart" src="_images/enthought_mayavi_mlab_barchart1.jpg" style="width: 161.0px; height: 113.0px;" /></a></td>
<td><a class="reference internal" href="auto/mlab_helper_functions.html#mayavi.mlab.barchart" title="mayavi.mlab.barchart"><tt class="xref py py-func docutils literal"><span class="pre">barchart()</span></tt></a>
<br>
Plot an array <tt class="docutils literal"><span class="pre">s</span></tt>, or a set of points with
explicit coordinates arrays, <tt class="docutils literal"><span class="pre">x</span></tt>, <tt class="docutils literal"><span class="pre">y</span></tt> and <tt class="docutils literal"><span class="pre">z</span></tt>,
as a bar chart, eg for histograms.
<br>
This function is very versatile and will accept 2D or
3D arrays, but also clouds of points, to position the
bars.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="_images/enthought_mayavi_mlab_triangular_mesh1.jpg"><img alt="triangular_mesh" src="_images/enthought_mayavi_mlab_triangular_mesh1.jpg" style="width: 137.0px; height: 105.0px;" /></a></td>
<td><a class="reference internal" href="auto/mlab_helper_functions.html#mayavi.mlab.triangular_mesh" title="mayavi.mlab.triangular_mesh"><tt class="xref py py-func docutils literal"><span class="pre">triangular_mesh()</span></tt></a>
<br>
Plot a triangular mesh, fully specified by
<tt class="docutils literal"><span class="pre">x</span></tt>, <tt class="docutils literal"><span class="pre">y</span></tt> and <tt class="docutils literal"><span class="pre">z</span></tt> coordinates of its
vertices, and the (n, 3) array of the indices of
the triangles.</td>
</tr>
</tbody>
</table>
<div class="topic">
<p class="topic-title first">Vertical scale of  <a class="reference internal" href="auto/mlab_helper_functions.html#mayavi.mlab.surf" title="mayavi.mlab.surf"><tt class="xref py py-func docutils literal"><span class="pre">surf()</span></tt></a> and <a class="reference internal" href="auto/mlab_helper_functions.html#mayavi.mlab.contour_surf" title="mayavi.mlab.contour_surf"><tt class="xref py py-func docutils literal"><span class="pre">contour_surf()</span></tt></a></p>
<p><a class="reference internal" href="auto/mlab_helper_functions.html#mayavi.mlab.surf" title="mayavi.mlab.surf"><tt class="xref py py-func docutils literal"><span class="pre">surf()</span></tt></a> and <a class="reference internal" href="auto/mlab_helper_functions.html#mayavi.mlab.contour_surf" title="mayavi.mlab.contour_surf"><tt class="xref py py-func docutils literal"><span class="pre">contour_surf()</span></tt></a> can be used as 3D
representation of 2D data. By default the z-axis is supposed to
be in the same units as the x and y axis, but it can be
auto-scaled to give a 2/3 aspect ratio. This behavior can be
controlled by specifying the &#8220;warp_scale=&#8217;auto&#8217;&#8221;.</p>
</div>
<div class="topic">
<p class="topic-title first">From data points to surfaces.</p>
<p>Knowing the positions of data points is not enough to define a
surface, connectivity information is also required. With the
functions <a class="reference internal" href="auto/mlab_helper_functions.html#mayavi.mlab.surf" title="mayavi.mlab.surf"><tt class="xref py py-func docutils literal"><span class="pre">surf()</span></tt></a> and <a class="reference internal" href="auto/mlab_helper_functions.html#mayavi.mlab.mesh" title="mayavi.mlab.mesh"><tt class="xref py py-func docutils literal"><span class="pre">mesh()</span></tt></a>, this connectivity
information is implicitly extracted from the shape of the input
arrays: neighboring data points in the 2D input arrays are
connected, and the data lies on a grid. With the function
<a class="reference internal" href="auto/mlab_helper_functions.html#mayavi.mlab.triangular_mesh" title="mayavi.mlab.triangular_mesh"><tt class="xref py py-func docutils literal"><span class="pre">triangular_mesh()</span></tt></a>, connectivity is explicitly specified.
Quite often, the connectivity is not regular, but is not known in
advance either. The data points lie on a surface, and we want to
plot the surface implicitly defined. The <cite>delaunay2d</cite> filter does
the required nearest-neighbor matching, and interpolation, as
shown in the (<a class="reference internal" href="auto/example_surface_from_irregular_data.html#example-surface-from-irregular-data"><em>Surface from irregular data example</em></a>).</p>
</div>
</div>
<div class="section" id="id1">
<h3>3D data<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="23%" />
<col width="77%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">&nbsp;</th>
<th class="head">&nbsp;</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><a class="reference internal" href="_images/enthought_mayavi_mlab_contour3d1.jpg"><img alt="contour3d" src="_images/enthought_mayavi_mlab_contour3d1.jpg" style="width: 184.5px; height: 169.0px;" /></a></td>
<td><a class="reference internal" href="auto/mlab_helper_functions.html#mayavi.mlab.contour3d" title="mayavi.mlab.contour3d"><tt class="xref py py-func docutils literal"><span class="pre">contour3d()</span></tt></a>
<br>
Plot iso-surfaces of volumetric data defined as a 3D
array.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="_images/enthought_mayavi_mlab_quiver3d1.jpg"><img alt="quiver3d" src="_images/enthought_mayavi_mlab_quiver3d1.jpg" style="width: 169.0px; height: 177.0px;" /></a></td>
<td><a class="reference internal" href="auto/mlab_helper_functions.html#mayavi.mlab.quiver3d" title="mayavi.mlab.quiver3d"><tt class="xref py py-func docutils literal"><span class="pre">quiver3d()</span></tt></a>
<br>
Plot arrows to represent vectors at data points.
The <tt class="docutils literal"><span class="pre">x</span></tt>, <tt class="docutils literal"><span class="pre">y</span></tt>, <tt class="docutils literal"><span class="pre">z</span></tt> position are specified by
numpy arrays, as well as the <tt class="docutils literal"><span class="pre">u</span></tt>, <tt class="docutils literal"><span class="pre">v</span></tt>, <tt class="docutils literal"><span class="pre">w</span></tt>
components of the vectors.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="_images/enthought_mayavi_mlab_flow1.jpg"><img alt="flow" src="_images/enthought_mayavi_mlab_flow1.jpg" style="width: 169.0px; height: 105.0px;" /></a></td>
<td><a class="reference internal" href="auto/mlab_helper_functions.html#mayavi.mlab.flow" title="mayavi.mlab.flow"><tt class="xref py py-func docutils literal"><span class="pre">flow()</span></tt></a>
<br>
Plot a trajectory of particles along a vector field
described by three 3D arrays giving the <tt class="docutils literal"><span class="pre">u</span></tt>,
<tt class="docutils literal"><span class="pre">v</span></tt>, <tt class="docutils literal"><span class="pre">w</span></tt> components on a grid.</td>
</tr>
</tbody>
</table>
<div class="topic">
<p class="topic-title first">Structured or unstructured data</p>
<p><a class="reference internal" href="auto/mlab_helper_functions.html#mayavi.mlab.contour3d" title="mayavi.mlab.contour3d"><tt class="xref py py-func docutils literal"><span class="pre">contour3d()</span></tt></a> and <a class="reference internal" href="auto/mlab_helper_functions.html#mayavi.mlab.flow" title="mayavi.mlab.flow"><tt class="xref py py-func docutils literal"><span class="pre">flow()</span></tt></a> require ordered data (to
be able to interpolate between the points), whereas <a class="reference internal" href="auto/mlab_helper_functions.html#mayavi.mlab.quiver3d" title="mayavi.mlab.quiver3d"><tt class="xref py py-func docutils literal"><span class="pre">quiver3d()</span></tt></a>
works with any set of points. The required structure is detailed
in the functions&#8217; documentation.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Many richer visualizations can be created by assembling data sources
filters and modules. See the
<a class="reference internal" href="mlab_pipeline.html#controlling-the-pipeline-with-mlab-scripts"><em>Assembling pipelines with mlab</em></a> and the
<a class="reference internal" href="mlab_case_studies.html#mlab-case-studies"><em>Case studies of some visualizations</em></a> sections.</p>
</div>
</div>
</div>
<div class="section" id="changing-the-looks-of-the-visual-objects-created">
<h2><a class="toc-backref" href="#id7">Changing the looks of the visual objects created</a><a class="headerlink" href="#changing-the-looks-of-the-visual-objects-created" title="Permalink to this headline">¶</a></h2>
<div class="section" id="adding-color-or-size-variations">
<h3>Adding color or size variations<a class="headerlink" href="#adding-color-or-size-variations" title="Permalink to this headline">¶</a></h3>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Color:</th><td class="field-body"><p class="first">The color of the objects created by a plotting function can be specified
explicitly using the &#8216;color&#8217; keyword argument of the function. This color
is then applied uniformly to all the objects created.</p>
<p>If you want to vary the color across your visualization, you need to
specify scalar information for each data point. Some functions try to
guess this information: these scalars default to the norm of the vectors,
for functions with vectors, or to the z elevation for functions where it is
meaningful, such as <a class="reference internal" href="auto/mlab_helper_functions.html#mayavi.mlab.surf" title="mayavi.mlab.surf"><tt class="xref py py-func docutils literal"><span class="pre">surf()</span></tt></a> or <a class="reference internal" href="auto/mlab_helper_functions.html#mayavi.mlab.barchart" title="mayavi.mlab.barchart"><tt class="xref py py-func docutils literal"><span class="pre">barchart()</span></tt></a>.</p>
<p>This scalar information is converted into colors using the colormap, or
also called LUT, for Look Up Table. The list of possible colormaps is:</p>
<div class="highlight-python"><pre>accent       flag          hot      pubu     set2
autumn       gist_earth    hsv      pubugn   set3
black-white  gist_gray     jet      puor     spectral
blue-red     gist_heat     oranges  purd     spring
blues        gist_ncar     orrd     purples  summer
bone         gist_rainbow  paired   rdbu     winter
brbg         gist_stern    pastel1  rdgy     ylgnbu
bugn         gist_yarg     pastel2  rdpu     ylgn
bupu         gnbu          pink     rdylbu   ylorbr
cool         gray          piyg     rdylgn   ylorrd
copper       greens        prgn     reds
dark2        greys         prism    set1</pre>
</div>
<p>The easiest way to choose the colormap, most adapted to your visualization
is to use the GUI (as described in the next paragraph). The dialog
to set the colormap can be found in the <cite>Colors and legends</cite> node.</p>
<p>To use a custom-defined colormap, for the time being, you need to write
specific code, as show in <a class="reference internal" href="auto/example_custom_colormap.html#example-custom-colormap"><em>Custom colormap example</em></a>.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Size of the glyph:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><p class="first">The scalar information can also be displayed in many different ways.
For instance it can be used to adjust the size of glyphs positioned at
the data points.</p>
<p><strong>A caveat: Clamping: relative or absolute scaling</strong>
Given six points positionned on a line with interpoint spacing 1:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>
<span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
<span class="n">z</span> <span class="o">=</span> <span class="n">y</span>
</pre></div>
</div>
<p>If we represent a scalar varying from 0.5 to 1 on this dataset:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">s</span> <span class="o">=</span> <span class="p">[</span><span class="o">.</span><span class="mi">5</span><span class="p">,</span> <span class="o">.</span><span class="mi">6</span><span class="p">,</span> <span class="o">.</span><span class="mi">7</span><span class="p">,</span> <span class="o">.</span><span class="mi">8</span><span class="p">,</span> <span class="o">.</span><span class="mi">9</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
<p>We represent the dataset as spheres, using <a class="reference internal" href="auto/mlab_helper_functions.html#mayavi.mlab.points3d" title="mayavi.mlab.points3d"><tt class="xref py py-func docutils literal"><span class="pre">points3d()</span></tt></a>, and the
scalar is mapped to diameter of the spheres:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">mayavi</span> <span class="kn">import</span> <span class="n">mlab</span>
<span class="n">pts</span> <span class="o">=</span> <span class="n">mlab</span><span class="o">.</span><span class="n">points3d</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>
</pre></div>
</div>
<p>By default the diameter of the spheres is not &#8216;clamped&#8217;, in other
words, the smallest value of the scalar data is represented as a null
diameter, and the largest is proportional to inter-point distance.
The scaling is only relative, as can be seen on the resulting
figure:</p>
<img alt="_images/clamping_on.jpg" src="_images/clamping_on.jpg" />
<p>This behavior gives visible points for all datasets, but may not be
desired if the scalar represents the size of the glyphs in the same
unit as the positions specified.</p>
<p>In this case, you shoud turn auto-scaling off by specifying the desired
scale factor:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">pts</span> <span class="o">=</span> <span class="n">mlab</span><span class="o">.</span><span class="n">points3d</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">scale_factor</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<img alt="_images/clamping_off.jpg" src="_images/clamping_off.jpg" />
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>In earlier versions of Mayavi (up to 3.1.0 included), the glyphs are
not auto-scaled, and as a result the visualization can seem empty
due to the glyphs being very small. In addition the minimum diameter of
the glyphs is clamped to zero, and thus the glyph are not scaled
absolutely, unless you specify:</p>
<div class="last highlight-python"><div class="highlight"><pre><span class="n">pts</span><span class="o">.</span><span class="n">glyph</span><span class="o">.</span><span class="n">glyph</span><span class="o">.</span><span class="n">clamping</span> <span class="o">=</span> <span class="bp">False</span>
</pre></div>
</div>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">More representations of the attached scalars or vectors:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><p class="first">There are many more ways to represent the scalar or vector information
attached to the data. For instance, scalar data can be &#8216;warped&#8217; into a
displacement, e.g. using a <cite>WarpScalar</cite> filter, or the norm of scalar
data can be extracted to a scalar component that can be visualized using
iso-surfaces with the <cite>ExtractVectorNorm</cite> filter.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Displaying more than one quantity:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><p class="first">You may want to display color related to one scalar quantity while
using a second for the iso-contours, or the elevation. This is possible
but requires a bit of work: see <a class="reference internal" href="auto/example_atomic_orbital.html#example-atomic-orbital"><em>Atomic orbital example</em></a>.</p>
<p>If you simply want to display points with a size given by one quantity,
and a color by a second, you can use a simple trick: add the size
information using the norm of vectors, add the color information using
scalars, create a <a class="reference internal" href="auto/mlab_helper_functions.html#mayavi.mlab.quiver3d" title="mayavi.mlab.quiver3d"><tt class="xref py py-func docutils literal"><span class="pre">quiver3d()</span></tt></a> plot choosing the glyphs to symmetric
glyphs, and use scalars to represent the color:</p>
<div class="last highlight-python"><div class="highlight"><pre><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">((</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
<span class="n">pts</span> <span class="o">=</span> <span class="n">mlab</span><span class="o">.</span><span class="n">quiver3d</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">scalars</span><span class="o">=</span><span class="n">c</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s">&#39;sphere&#39;</span><span class="p">)</span>
<span class="n">pts</span><span class="o">.</span><span class="n">glyph</span><span class="o">.</span><span class="n">color_mode</span> <span class="o">=</span> <span class="s">&#39;color_by_scalar&#39;</span>
<span class="c"># Finally, center the glyphs on the data point</span>
<span class="n">pts</span><span class="o">.</span><span class="n">glyph</span><span class="o">.</span><span class="n">glyph_source</span><span class="o">.</span><span class="n">glyph_source</span><span class="o">.</span><span class="n">center</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="changing-the-scale-and-position-of-objects">
<h3>Changing the scale and position of objects<a class="headerlink" href="#changing-the-scale-and-position-of-objects" title="Permalink to this headline">¶</a></h3>
<p>Each mlab function takes an <cite>extent</cite> keyword argument, that allows to set
its (x, y, z) extents. This give both control on the scaling in the
different directions and the displacement of the center. Beware that when
you are using this functionality, it can be useful to pass the same
extents to other modules visualizing the same data. If you don&#8217;t, they
will not share the same displacement and scale.</p>
<p>The <a class="reference internal" href="auto/mlab_helper_functions.html#mayavi.mlab.surf" title="mayavi.mlab.surf"><tt class="xref py py-func docutils literal"><span class="pre">surf()</span></tt></a>, <a class="reference internal" href="auto/mlab_helper_functions.html#mayavi.mlab.contour_surf" title="mayavi.mlab.contour_surf"><tt class="xref py py-func docutils literal"><span class="pre">contour_surf()</span></tt></a>, and <a class="reference internal" href="auto/mlab_helper_functions.html#mayavi.mlab.barchart" title="mayavi.mlab.barchart"><tt class="xref py py-func docutils literal"><span class="pre">barchart()</span></tt></a> functions, which
display 2D arrays by converting the values in height, also take a
<cite>warp_scale</cite> parameter, to control the vertical scaling.</p>
</div>
<div class="section" id="changing-object-properties-interactively">
<span id="mlab-changing-objects-interactively"></span><h3>Changing object properties interactively<a class="headerlink" href="#changing-object-properties-interactively" title="Permalink to this headline">¶</a></h3>
<p>Mayavi, and thus mlab, allows you to interactively modify your
visualization.</p>
<p>The Mayavi pipeline tree can be displayed by clicking on the mayavi icon
in the figure&#8217;s toolbar, or by using <a class="reference internal" href="auto/mlab_other_functions.html#mayavi.mlab.show_pipeline" title="mayavi.mlab.show_pipeline"><tt class="xref py py-func docutils literal"><span class="pre">show_pipeline()</span></tt></a> mlab command.
One can now change the visualization using this dialog by double-clicking
on each object to edit its properties, as described in other parts of
this manual, or add new modules or filters by using this icons on the
pipeline, or through the right-click menus on the objects in the
pipeline.</p>
<img alt="_images/pipeline_and_scene.jpg" class="align-center" src="_images/pipeline_and_scene.jpg" />
<div class="topic" id="record-feature">
<p class="topic-title first">The record feature</p>
<p>A <strong>very useful feature</strong> of this dialog can be found by pressing the
red round button of the toolbar of the pipeline view. This opens up a
recorder that tracks the changes made interactively to the
visualization via the dialogs, and generates valid lines of Python
code. To find out about navigating through a program in the pipeline, see
<a class="reference internal" href="pipeline.html#organisation-mayavi-visualisations"><em>Organisation of Mayavi visualizations: the pipeline</em></a>.</p>
</div>
<p>In addition, for every object returned by a mlab function,
<tt class="docutils literal"><span class="pre">this_object.edit_traits()</span></tt> brings up a dialog that can be used to
interactively edit the object&#8217;s properties. If the dialog doesn&#8217;t show up
when you enter this command, please see <a class="reference internal" href="mlab_running_scripts.html#running-mlab-scripts"><em>Running mlab scripts</em></a>.</p>
<div class="topic">
<p class="topic-title first">Using <tt class="docutils literal"><span class="pre">mlab</span></tt> with the full Envisage UI</p>
<p>Sometimes it is convenient to write an mlab script but still use the
full envisage application so you can click on the menus and use other
modules etc.  To do this you may do the following before you create an
mlab figure:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">mayavi</span> <span class="kn">import</span> <span class="n">mlab</span>
<span class="n">mlab</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">backend</span> <span class="o">=</span> <span class="s">&#39;envisage&#39;</span>
<span class="n">f</span> <span class="o">=</span> <span class="n">mlab</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="c"># ...</span>
</pre></div>
</div>
<p>This will give you the full-fledged UI instead of the default simple
window.</p>
</div>
</div>
</div>
<div class="section" id="figures-legends-camera-and-decorations">
<h2><a class="toc-backref" href="#id8">Figures, legends, camera and decorations</a><a class="headerlink" href="#figures-legends-camera-and-decorations" title="Permalink to this headline">¶</a></h2>
<div class="section" id="handling-several-figures">
<h3>Handling several figures<a class="headerlink" href="#handling-several-figures" title="Permalink to this headline">¶</a></h3>
<p>All mlab functions operate on the current scene, that we also call
<a class="reference internal" href="auto/mlab_figure.html#mayavi.mlab.figure" title="mayavi.mlab.figure"><tt class="xref py py-func docutils literal"><span class="pre">figure()</span></tt></a>, for compatibility with matlab and pylab. The different
figures are indexed by key that can be an integer or a string. A call to
the <a class="reference internal" href="auto/mlab_figure.html#mayavi.mlab.figure" title="mayavi.mlab.figure"><tt class="xref py py-func docutils literal"><span class="pre">figure()</span></tt></a> function giving a key will either return the corresponding
figure, if it exists, or create a new one. The current figure can be
retrieved with the <a class="reference internal" href="auto/mlab_figure.html#mayavi.mlab.gcf" title="mayavi.mlab.gcf"><tt class="xref py py-func docutils literal"><span class="pre">gcf()</span></tt></a> function. It can be refreshed using the
<a class="reference internal" href="auto/mlab_figure.html#mayavi.mlab.draw" title="mayavi.mlab.draw"><tt class="xref py py-func docutils literal"><span class="pre">draw()</span></tt></a> function, saved to a picture file using <a class="reference internal" href="auto/mlab_figure.html#mayavi.mlab.savefig" title="mayavi.mlab.savefig"><tt class="xref py py-func docutils literal"><span class="pre">savefig()</span></tt></a> and
cleared using <a class="reference internal" href="auto/mlab_figure.html#mayavi.mlab.clf" title="mayavi.mlab.clf"><tt class="xref py py-func docutils literal"><span class="pre">clf()</span></tt></a>.</p>
</div>
<div class="section" id="figure-decorations">
<h3>Figure decorations<a class="headerlink" href="#figure-decorations" title="Permalink to this headline">¶</a></h3>
<p>Axes can be added around a visualization object with the <a class="reference internal" href="auto/mlab_other_functions.html#mayavi.mlab.axes" title="mayavi.mlab.axes"><tt class="xref py py-func docutils literal"><span class="pre">axes()</span></tt></a>
function, and the labels can be set using the <a class="reference internal" href="auto/mlab_decorations.html#mayavi.mlab.xlabel" title="mayavi.mlab.xlabel"><tt class="xref py py-func docutils literal"><span class="pre">xlabel()</span></tt></a>, <a class="reference internal" href="auto/mlab_decorations.html#mayavi.mlab.ylabel" title="mayavi.mlab.ylabel"><tt class="xref py py-func docutils literal"><span class="pre">ylabel()</span></tt></a>
and <a class="reference internal" href="auto/mlab_decorations.html#mayavi.mlab.zlabel" title="mayavi.mlab.zlabel"><tt class="xref py py-func docutils literal"><span class="pre">zlabel()</span></tt></a> functions. Similarly, <a class="reference internal" href="auto/mlab_other_functions.html#mayavi.mlab.outline" title="mayavi.mlab.outline"><tt class="xref py py-func docutils literal"><span class="pre">outline()</span></tt></a> creates an
outline around an object. <a class="reference internal" href="auto/mlab_other_functions.html#mayavi.mlab.title" title="mayavi.mlab.title"><tt class="xref py py-func docutils literal"><span class="pre">title()</span></tt></a> adds a title to the figure.</p>
<p>Color bars can be used to reflect the color maps used to display values
(LUT, or lookup tables, in VTK parlance). <a class="reference internal" href="auto/mlab_decorations.html#mayavi.mlab.colorbar" title="mayavi.mlab.colorbar"><tt class="xref py py-func docutils literal"><span class="pre">colorbar()</span></tt></a> creates a color
bar for the last object created, trying to guess whether to use the vector
data or the scalar data color maps. The <a class="reference internal" href="auto/mlab_decorations.html#mayavi.mlab.scalarbar" title="mayavi.mlab.scalarbar"><tt class="xref py py-func docutils literal"><span class="pre">scalarbar()</span></tt></a> and
<a class="reference internal" href="auto/mlab_decorations.html#mayavi.mlab.vectorbar" title="mayavi.mlab.vectorbar"><tt class="xref py py-func docutils literal"><span class="pre">vectorbar()</span></tt></a> function scan be used to create color bars specifically
for scalar or vector data.</p>
<p>A small <em>xyz</em> triad can be added to the figure using
<a class="reference internal" href="auto/mlab_other_functions.html#mayavi.mlab.orientation_axes" title="mayavi.mlab.orientation_axes"><tt class="xref py py-func docutils literal"><span class="pre">orientation_axes()</span></tt></a>.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The <a class="reference internal" href="auto/mlab_other_functions.html#mayavi.mlab.orientation_axes" title="mayavi.mlab.orientation_axes"><tt class="xref py py-func docutils literal"><span class="pre">orientation_axes()</span></tt></a> was named <cite>orientationaxes</cite>
before release 3.2.</p>
</div>
</div>
<div class="section" id="moving-the-camera">
<h3>Moving the camera<a class="headerlink" href="#moving-the-camera" title="Permalink to this headline">¶</a></h3>
<p>The position and direction of the camera can be set using the <a class="reference internal" href="auto/mlab_camera.html#mayavi.mlab.view" title="mayavi.mlab.view"><tt class="xref py py-func docutils literal"><span class="pre">view()</span></tt></a>
function. They are described in terms of Euler angles and distance to a
focal point. The <a class="reference internal" href="auto/mlab_camera.html#mayavi.mlab.view" title="mayavi.mlab.view"><tt class="xref py py-func docutils literal"><span class="pre">view()</span></tt></a> function tries to guess the right roll angle
of the camera for a pleasing view, but it sometimes fails. The <a class="reference internal" href="auto/mlab_camera.html#mayavi.mlab.roll" title="mayavi.mlab.roll"><tt class="xref py py-func docutils literal"><span class="pre">roll()</span></tt></a>
explicitly sets the roll angle of the camera (this can be achieve
interactively in the scene by pressing down the control key, while
dragging the mouse, see <a class="reference internal" href="application.html#interaction-with-the-scene"><em>Interaction with the scene</em></a>).</p>
<p>The <a class="reference internal" href="auto/mlab_camera.html#mayavi.mlab.view" title="mayavi.mlab.view"><tt class="xref py py-func docutils literal"><span class="pre">view()</span></tt></a> and <a class="reference internal" href="auto/mlab_camera.html#mayavi.mlab.roll" title="mayavi.mlab.roll"><tt class="xref py py-func docutils literal"><span class="pre">roll()</span></tt></a> functions return the current values of
the different angles and distances they take as arguments. As a result, the
view point obtained interactively can be stored and reset using:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Store the information</span>
<span class="n">view</span> <span class="o">=</span> <span class="n">mlab</span><span class="o">.</span><span class="n">view</span><span class="p">()</span>
<span class="n">roll</span> <span class="o">=</span> <span class="n">mlab</span><span class="o">.</span><span class="n">roll</span><span class="p">()</span>

<span class="c"># Reposition the camera</span>
<span class="n">mlab</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="o">*</span><span class="n">view</span><span class="p">)</span>
<span class="n">mlab</span><span class="o">.</span><span class="n">roll</span><span class="p">(</span><span class="n">roll</span><span class="p">)</span>
</pre></div>
</div>
<div class="topic">
<p class="topic-title first">Rotating the camera around itself</p>
<blockquote>
<div><p>You can also rotate the camera around itself using the <cite>roll</cite>, <cite>yaw</cite>
and <cite>pitch</cite> methods of the camera object. This moves the focal point:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">f</span> <span class="o">=</span> <span class="n">mlab</span><span class="o">.</span><span class="n">gcf</span><span class="p">()</span>
<span class="n">camera</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">camera</span>
<span class="n">camera</span><span class="o">.</span><span class="n">yaw</span><span class="p">(</span><span class="mi">45</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p>Unlike the <a class="reference internal" href="auto/mlab_camera.html#mayavi.mlab.view" title="mayavi.mlab.view"><tt class="xref py py-func docutils literal"><span class="pre">view()</span></tt></a> and <a class="reference internal" href="auto/mlab_camera.html#mayavi.mlab.roll" title="mayavi.mlab.roll"><tt class="xref py py-func docutils literal"><span class="pre">roll()</span></tt></a> function, the angles
are incremental, and not absolute.</p>
</div>
<div class="topic">
<p class="topic-title first">Modifying zoom and view angle</p>
<p>The camera is entirely defined by its position, its focal point, and
its view angle (attributes &#8216;position&#8217;, &#8216;focal_point&#8217;, &#8216;view_angle&#8217;).
The camera method &#8216;zoom&#8217; changes the view angle incrementally by the
specify ratio, where as the method &#8216;dolly&#8217; translates the camera along
its axis while keeping the focal point constant. The <a class="reference internal" href="auto/mlab_camera.html#mayavi.mlab.move" title="mayavi.mlab.move"><tt class="xref py py-func docutils literal"><span class="pre">move()</span></tt></a>
function can also be useful in these regards.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Camera parallel scale</p>
<p>In addition to the information returned and set by mlab.view and
mlab.roll, a last parameter is needed to fully define the view point:
the parallel scale of the camera, that control its view angle. It can
be read (or set) with the following code:</p>
<div class="last highlight-python"><div class="highlight"><pre><span class="n">f</span> <span class="o">=</span> <span class="n">mlab</span><span class="o">.</span><span class="n">gcf</span><span class="p">()</span>
<span class="n">camera</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">camera</span>
<span class="n">cam</span><span class="o">.</span><span class="n">parallel_scale</span> <span class="o">=</span> <span class="mi">9</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="running-mlab-scripts">
<span id="id2"></span><h2><a class="toc-backref" href="#id9">Running mlab scripts</a><a class="headerlink" href="#running-mlab-scripts" title="Permalink to this headline">¶</a></h2>
<p>Mlab, like the rest of Mayavi, is an interactive application. If you are
not already in an interactive environment (see next paragraph), to
interact with the figures or the rest of the drawing elements, you need
to use the <a class="reference internal" href="auto/mlab_other_functions.html#mayavi.mlab.show" title="mayavi.mlab.show"><tt class="xref py py-func docutils literal"><span class="pre">show()</span></tt></a> function. For instance, if you are writing a
script, you need to call <a class="reference internal" href="auto/mlab_other_functions.html#mayavi.mlab.show" title="mayavi.mlab.show"><tt class="xref py py-func docutils literal"><span class="pre">show()</span></tt></a> each time you want to display one
or more figures and allow the user to interact with them.</p>
<div class="section" id="using-mlab-interactively">
<h3>Using mlab interactively<a class="headerlink" href="#using-mlab-interactively" title="Permalink to this headline">¶</a></h3>
<p>Using <a class="reference external" href="http://ipython.scipy.org">IPython</a>, mlab instructions can be run interactively, or in
scripts using <a class="reference external" href="http://ipython.scipy.org">IPython</a>&#8216;s <tt class="docutils literal"><span class="pre">%run</span></tt> command:</p>
<div class="highlight-python"><pre>In [1]: %run my_script</pre>
</div>
<p>You need to start <a class="reference external" href="http://ipython.scipy.org">IPython</a> with the <cite>-wthread</cite> option, that became <cite>&#8211;gui=wx</cite> in the recent IPython versions (when installed
with <a class="reference external" href="http://www.enthought.com/products/epd.php">EPD</a>, the <cite>pylab</cite> start-menu link does this for you). In this
environment, the plotting commands are interactive: they have an
immediate effect on the figure, alleviating the need to use the
<a class="reference internal" href="auto/mlab_other_functions.html#mayavi.mlab.show" title="mayavi.mlab.show"><tt class="xref py py-func docutils literal"><span class="pre">show()</span></tt></a> function.</p>
<p>Mlab can also be used interactively in the Python shell of the mayavi2
application, or in any interactive Python shell of wxPython-based
application (such as other Envisage-based applications, or SPE, Stani&#8217;s
Python Editor).</p>
</div>
<div class="section" id="using-together-with-matplotlib-s-pylab">
<h3>Using together with Matplotlib&#8217;s pylab<a class="headerlink" href="#using-together-with-matplotlib-s-pylab" title="Permalink to this headline">¶</a></h3>
<p>If you want to use Matplotlib&#8217;s pylab with Mayavi&#8217;s mlab in IPython you
should:</p>
<blockquote>
<div><ul>
<li><p class="first">if your IPython version is greater than 0.11: start IPython with:</p>
<div class="highlight-python"><pre>$ ipython --gui=wx --pylab=wx</pre>
</div>
</li>
<li><p class="first">else, if your IPython version is greater than 0.8.4: start IPython with
the following options:</p>
<div class="highlight-python"><pre>$ ipython -pylab -wthread</pre>
</div>
</li>
<li><p class="first">elsewhere, start IPython with the <cite>-wthread</cite> option:</p>
<div class="highlight-python"><pre>$ ipython -wthread</pre>
</div>
<p>and <strong>before</strong> importing pylab, enter the following Python
commands:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">matplotlib</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">matplotlib</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="s">&#39;WxAgg&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">matplotlib</span><span class="o">.</span><span class="n">interactive</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
</div></blockquote>
<p>If you want matplotlib and mlab to work together by default in IPython,
you can change you default matplotlib backend, by editing the
<cite>~/.matplotlib/matplotlibrc</cite> to add the following line:</p>
<div class="highlight-python"><pre>backend     : WXAgg</pre>
</div>
<div class="topic">
<p class="topic-title first">Capturing mlab plots to integrate in pylab</p>
<p>Starting from Mayavi version 3.4.0, the mlab <a class="reference internal" href="auto/mlab_figure.html#mayavi.mlab.screenshot" title="mayavi.mlab.screenshot"><tt class="xref py py-func docutils literal"><span class="pre">screenshot()</span></tt></a> can
be used to take a screenshot of the current figure, to integrate in a
matplotlib plot.</p>
</div>
</div>
<div class="section" id="in-scripts">
<h3>In scripts<a class="headerlink" href="#in-scripts" title="Permalink to this headline">¶</a></h3>
<p>Mlab commands can be written to a file, to form a script. This script
can be loaded in the Mayavi application using the <em>File-&gt;Open file</em> menu
entry, and executed using the <em>File-&gt;Refresh code</em> menu entry or by
pressing <tt class="docutils literal"><span class="pre">Control-r</span></tt>.  It can also be executed during the start of the
Mayavi application using the <tt class="docutils literal"><span class="pre">-x</span></tt> command line switch.</p>
<p>As mentioned above, when running outside of an interactive environment,
for instance with <cite>python myscript.py</cite>, you need to call the
<a class="reference internal" href="auto/mlab_other_functions.html#mayavi.mlab.show" title="mayavi.mlab.show"><tt class="xref py py-func docutils literal"><span class="pre">show()</span></tt></a> function (as shown in the <a class="reference external" href=":ref:`mlab-demo`">demo</a> above) to pause your script
and have the user interact with the figure.</p>
<p>You can also use <a class="reference internal" href="auto/mlab_other_functions.html#mayavi.mlab.show" title="mayavi.mlab.show"><tt class="xref py py-func docutils literal"><span class="pre">show()</span></tt></a> to decorate a function, and have it run in
the event-loop, which gives you more flexibility:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">mayavi</span> <span class="kn">import</span> <span class="n">mlab</span>
<span class="kn">from</span> <span class="nn">numpy</span> <span class="kn">import</span> <span class="n">random</span>

<span class="nd">@mlab.show</span>
<span class="k">def</span> <span class="nf">image</span><span class="p">():</span>
   <span class="n">mlab</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">((</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">)))</span>
</pre></div>
</div>
<p>With this decorator, each time the <cite>image</cite> function is called, <cite>mlab</cite>
makes sure an interactive environment is running before executing the
<cite>image</cite> function. If an interactive environment is not running, <cite>mlab</cite>
will start one and the image function will not return until it is closed.</p>
</div>
</div>
<div class="section" id="animating-the-data">
<span id="mlab-animating-data"></span><h2><a class="toc-backref" href="#id10">Animating the data</a><a class="headerlink" href="#animating-the-data" title="Permalink to this headline">¶</a></h2>
<p>Often it isn&#8217;t sufficient to just plot the data.  You may also want to
change the data of the plot and update the plot without having to
recreate the entire visualization, for instance to do animations, or in
an interactive application. Indeed, recreating the entire visualization
is very inefficient and leads to very jerky looking
animations. To do this, mlab provides a very convenient way to change
the data of an existing mlab visualization.  Consider a very simple
example.  The <cite>mlab.test_simple_surf_anim</cite> function has this code:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">mayavi</span> <span class="kn">import</span> <span class="n">mlab</span>
<span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mgrid</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">:</span><span class="mi">1</span><span class="p">]</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">mlab</span><span class="o">.</span><span class="n">surf</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">x</span><span class="o">*</span><span class="mf">0.1</span><span class="p">,</span> <span class="s">&#39;d&#39;</span><span class="p">))</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
    <span class="n">s</span><span class="o">.</span><span class="n">mlab_source</span><span class="o">.</span><span class="n">scalars</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">x</span><span class="o">*</span><span class="mf">0.1</span><span class="o">*</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">),</span> <span class="s">&#39;d&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The first two lines define a simple plane and view that.  The next three
lines animate that data by changing the scalars producing a plane that
rotates about the origin.  The key here is that the <cite>s</cite> object above has
a special attribute called <cite>mlab_source</cite>.  This sub-object allows us to
manipulate the points and scalars.  If we wanted to change the <cite>x</cite> values
we could set that too by:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">s</span><span class="o">.</span><span class="n">mlab_source</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">new_x</span>
</pre></div>
</div>
<p>The only thing to keep in mind here is that the shape of <cite>x</cite> should not
be changed.</p>
<p>If multiple values have to be changed, you can use the <cite>set</cite> method of
the <cite>mlab_source</cite> to set them as shown in the more complicated example
below:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Produce some nice data.</span>
<span class="n">n_mer</span><span class="p">,</span> <span class="n">n_long</span> <span class="o">=</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">11</span>
<span class="n">pi</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span>
<span class="n">dphi</span> <span class="o">=</span> <span class="n">pi</span><span class="o">/</span><span class="mf">1000.0</span>
<span class="n">phi</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mi">2</span><span class="o">*</span><span class="n">pi</span> <span class="o">+</span> <span class="mf">0.5</span><span class="o">*</span><span class="n">dphi</span><span class="p">,</span> <span class="n">dphi</span><span class="p">,</span> <span class="s">&#39;d&#39;</span><span class="p">)</span>
<span class="n">mu</span> <span class="o">=</span> <span class="n">phi</span><span class="o">*</span><span class="n">n_mer</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">mu</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">n_long</span><span class="o">*</span><span class="n">mu</span><span class="o">/</span><span class="n">n_mer</span><span class="p">)</span><span class="o">*</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">mu</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">n_long</span><span class="o">*</span><span class="n">mu</span><span class="o">/</span><span class="n">n_mer</span><span class="p">)</span><span class="o">*</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">z</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">n_long</span><span class="o">*</span><span class="n">mu</span><span class="o">/</span><span class="n">n_mer</span><span class="p">)</span><span class="o">*</span><span class="mf">0.5</span>

<span class="c"># View it.</span>
<span class="n">l</span> <span class="o">=</span> <span class="n">plot3d</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">mu</span><span class="p">),</span> <span class="n">tube_radius</span><span class="o">=</span><span class="mf">0.025</span><span class="p">,</span> <span class="n">colormap</span><span class="o">=</span><span class="s">&#39;Spectral&#39;</span><span class="p">)</span>

<span class="c"># Now animate the data.</span>
<span class="n">ms</span> <span class="o">=</span> <span class="n">l</span><span class="o">.</span><span class="n">mlab_source</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">mu</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">n_long</span><span class="o">*</span><span class="n">mu</span><span class="o">/</span><span class="n">n_mer</span> <span class="o">+</span>
                                      <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="mf">5.</span><span class="p">)</span><span class="o">*</span><span class="mf">0.5</span><span class="p">)</span>
    <span class="n">scalars</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">mu</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="mi">5</span><span class="p">)</span>
    <span class="n">ms</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">scalars</span><span class="o">=</span><span class="n">scalars</span><span class="p">)</span>
</pre></div>
</div>
<p>Notice the use of the <cite>set</cite> method above. With this method, the
visualization is recomputed only once.  In this case, the shape of the
new arrays has not changed, only their values have.  If the shape of the
array changes then one should use the <cite>reset</cite> method as shown below:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mgrid</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">:</span><span class="mi">1</span><span class="p">]</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">mlab</span><span class="o">.</span><span class="n">surf</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">x</span><span class="o">*</span><span class="mf">0.1</span><span class="p">,</span> <span class="s">&#39;d&#39;</span><span class="p">),</span>
              <span class="n">representation</span><span class="o">=</span><span class="s">&#39;wireframe&#39;</span><span class="p">)</span>
<span class="c"># Animate the data.</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">mlab</span><span class="o">.</span><span class="n">gcf</span><span class="p">()</span>
<span class="n">ms</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">mlab_source</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
    <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mgrid</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">:</span><span class="mf">1.0</span><span class="o">/</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">2</span><span class="p">),</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">:</span><span class="mf">1.0</span><span class="o">/</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">2</span><span class="p">)]</span>
    <span class="n">sc</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">x</span><span class="o">*</span><span class="n">x</span><span class="o">*</span><span class="mf">0.05</span><span class="o">*</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">),</span> <span class="s">&#39;d&#39;</span><span class="p">)</span>
    <span class="n">ms</span><span class="o">.</span><span class="n">reset</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">scalars</span><span class="o">=</span><span class="n">sc</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">reset_zoom</span><span class="p">()</span>
</pre></div>
</div>
<p>Many standard examples for animating data are provided with mlab.  Try
the examples with the name <cite>mlab.test_&lt;name&gt;_anim</cite>, i.e. where the name
ends with an <cite>_anim</cite> to see how these work and run.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">It is important to remember distinction between <cite>set</cite> and <cite>reset</cite>.
Use <cite>set</cite> or directly set the attributes (<cite>x</cite>, <cite>y</cite>, <cite>scalars</cite> etc.)
when you are not changing the shape of the data but only the values.
Use <cite>reset</cite> when the arrays are changing shape and size.  Reset
usually regenerates all the data and can be inefficient when
compared to <cite>set</cite> or directly setting the traits.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">When creating a Mayavi pipeline, as explained in the following
subsection, instead of using ready-made plotting function, the
<cite>mlab_source</cite> attribute is created only on sources created via
<cite>mlab</cite>. Pipeline created entirely using <cite>mlab</cite> will present this
attribute.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you are animating several plot objects, each time you modify the
data with there <cite>mlab_source</cite> attribute, Mayavi will trigger a
refresh of the scene. This operation might take time, and thus slow
your animation. In this case, the tip
<a class="reference internal" href="tips.html#acceleration-mayavi-scripts"><em>Accelerating a Mayavi script</em></a> may come in handy.</p>
</div>
</div>
<div class="section" id="assembling-pipelines-with-mlab">
<span id="controlling-the-pipeline-with-mlab-scripts"></span><h2><a class="toc-backref" href="#id11">Assembling pipelines with <cite>mlab</cite></a><a class="headerlink" href="#assembling-pipelines-with-mlab" title="Permalink to this headline">¶</a></h2>
<p>The plotting functions reviewed above explore only a small fraction of
the visualization possibilities of Mayavi. The full power of Mayavi can
only be unleashed through the control of the pipeline itself. As
described in the <a class="reference internal" href="overview.html#an-overview-of-mayavi"><em>An overview of Mayavi</em></a> section, a visualization in
Mayavi is created by loading the data in Mayavi with <cite>data source</cite>
object, optionally transforming the data through <a class="reference internal" href="filters.html#filters"><em>Filters</em></a>, and
visualizing it with <a class="reference internal" href="modules.html#modules"><em>Modules</em></a>. The mlab functions build complex
pipelines for you in one function, making the right choice of sources,
filters, and modules, but they cannot explore all the possible
combinations.</p>
<p>Mlab provides a sub-module <cite>pipeline</cite> which contains functions to populate
the pipeline easily from scripts. This module is accessible in <cite>mlab</cite>:
<cite>mlab.pipeline</cite>, or can be imported from
<cite>mayavi.tools.pipeline</cite>.</p>
<p>When using an <cite>mlab</cite> plotting function, a pipeline is created: first a
source is created from <cite>numpy</cite> arrays, then modules, and possibly
filters, are added. The resulting pipeline can be seen for instance with
the <cite>mlab.show_pipeline</cite> command. This information can be used to create
the very same pipeline directly using the <cite>pipeline</cite> scripting module, as
the names of the functions required to create each step of the pipeline
are directly linked to the default names of the objects created by <cite>mlab</cite>
on the pipeline. As an example, let us create a visualization using
<a class="reference internal" href="auto/mlab_helper_functions.html#mayavi.mlab.surf" title="mayavi.mlab.surf"><tt class="xref py py-func docutils literal"><span class="pre">surf()</span></tt></a>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">((</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="kn">from</span> <span class="nn">mayavi</span> <span class="kn">import</span> <span class="n">mlab</span>
<span class="n">mlab</span><span class="o">.</span><span class="n">surf</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="n">mlab</span><span class="o">.</span><span class="n">show_pipeline</span><span class="p">()</span>
</pre></div>
</div>
<p>The following pipeline is created:</p>
<div class="highlight-python"><pre>Array2DSource
    \__ WarpScalar
            \__ PolyDataNormals
                    \__ Colors and legends
                            \__ Surface</pre>
</div>
<p>The same pipeline can be created using the following code:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">src</span> <span class="o">=</span> <span class="n">mlab</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">array2d_source</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="n">warp</span> <span class="o">=</span> <span class="n">mlab</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">warp_scalar</span><span class="p">(</span><span class="n">src</span><span class="p">)</span>
<span class="n">normals</span> <span class="o">=</span> <span class="n">mlab</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">poly_data_normals</span><span class="p">(</span><span class="n">warp</span><span class="p">)</span>
<span class="n">surf</span> <span class="o">=</span> <span class="n">mlab</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">surface</span><span class="p">(</span><span class="n">normals</span><span class="p">)</span>
</pre></div>
</div>
<div class="section" id="data-sources">
<span id="mlab-data-source"></span><h3>Data sources<a class="headerlink" href="#data-sources" title="Permalink to this headline">¶</a></h3>
<p>The <cite>mlab.pipeline</cite> module contains functions for creating various data
sources from arrays. They are fully documented in details in the
<a class="reference internal" href="mlab_pipeline_reference.html#mlab-pipeline-reference"><em>Mlab pipeline-control reference</em></a>. We give a small summary of the
possibilities here.</p>
<p>Mayavi distinguishes sources with <strong>scalar data</strong>, and sources with
<strong>vector data</strong>, but more important, it has different functions to create
sets of <strong>unconnected points</strong>, with data attached to them, or
<strong>connected data points</strong> describing continuously varying quantities that
can be interpolated between data points, often called <cite>fields</cite> in physics
or engineering.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Unconnected sources:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><table class="hlist"><tr><td><ul>
<li><p class="first"><a class="reference internal" href="auto/mlab_pipeline_sources.html#mayavi.tools.pipeline.scalar_scatter" title="mayavi.tools.pipeline.scalar_scatter"><tt class="xref py py-func docutils literal"><span class="pre">scalar_scatter()</span></tt></a> (creates a <a class="reference internal" href="data.html#poly-data"><em>PolyData</em></a>)</p>
<a class="reference internal image-reference" href="_images/enthought_mayavi_mlab_points3d1.jpg"><img alt="_images/enthought_mayavi_mlab_points3d1.jpg" src="_images/enthought_mayavi_mlab_points3d1.jpg" style="width: 121.98px; height: 122.36px;" /></a>
</li>
</ul>
</td><td><ul>
<li><p class="first"><a class="reference internal" href="auto/mlab_pipeline_sources.html#mayavi.tools.pipeline.vector_scatter" title="mayavi.tools.pipeline.vector_scatter"><tt class="xref py py-func docutils literal"><span class="pre">vector_scatter()</span></tt></a> (creates an <a class="reference internal" href="data.html#poly-data"><em>PolyData</em></a>)</p>
<a class="reference internal image-reference" href="_images/enthought_mayavi_mlab_quiver3d1.jpg"><img alt="_images/enthought_mayavi_mlab_quiver3d1.jpg" src="_images/enthought_mayavi_mlab_quiver3d1.jpg" style="width: 135.2px; height: 141.6px;" /></a>
</li>
</ul>
</td></tr></table>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">implicitly-connected sources:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><table class="hlist"><tr><td><ul>
<li><p class="first"><a class="reference internal" href="auto/mlab_pipeline_sources.html#mayavi.tools.pipeline.scalar_field" title="mayavi.tools.pipeline.scalar_field"><tt class="xref py py-func docutils literal"><span class="pre">scalar_field()</span></tt></a> (creates an <a class="reference internal" href="data.html#image-data"><em>ImageData</em></a>)</p>
<a class="reference internal image-reference" href="_images/enthought_mayavi_mlab_contour3d1.jpg"><img alt="_images/enthought_mayavi_mlab_contour3d1.jpg" src="_images/enthought_mayavi_mlab_contour3d1.jpg" style="width: 140.22px; height: 128.44px;" /></a>
</li>
<li><p class="first"><a class="reference internal" href="auto/mlab_pipeline_sources.html#mayavi.tools.pipeline.vector_field" title="mayavi.tools.pipeline.vector_field"><tt class="xref py py-func docutils literal"><span class="pre">vector_field()</span></tt></a> (creates an <a class="reference internal" href="data.html#image-data"><em>ImageData</em></a>)</p>
<a class="reference internal image-reference" href="_images/enthought_mayavi_mlab_flow1.jpg"><img alt="_images/enthought_mayavi_mlab_flow1.jpg" src="_images/enthought_mayavi_mlab_flow1.jpg" style="width: 169.0px; height: 105.0px;" /></a>
</li>
</ul>
</td><td><ul>
<li><p class="first"><a class="reference internal" href="auto/mlab_pipeline_sources.html#mayavi.tools.pipeline.array2d_source" title="mayavi.tools.pipeline.array2d_source"><tt class="xref py py-func docutils literal"><span class="pre">array2d_source()</span></tt></a> (creates an <a class="reference internal" href="data.html#image-data"><em>ImageData</em></a>)</p>
<a class="reference internal image-reference" href="_images/enthought_mayavi_mlab_imshow1.jpg"><img alt="_images/enthought_mayavi_mlab_imshow1.jpg" src="_images/enthought_mayavi_mlab_imshow1.jpg" style="width: 180.0px; height: 116.1px;" /></a>
</li>
</ul>
</td></tr></table>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">Explicitly-connected sources:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><table class="hlist"><tr><td><ul>
<li><p class="first"><a class="reference internal" href="auto/mlab_pipeline_sources.html#mayavi.tools.pipeline.line_source" title="mayavi.tools.pipeline.line_source"><tt class="xref py py-func docutils literal"><span class="pre">line_source()</span></tt></a> (creates an <a class="reference internal" href="data.html#poly-data"><em>PolyData</em></a>)</p>
<a class="reference internal image-reference" href="_images/enthought_mayavi_mlab_plot3d1.jpg"><img alt="_images/enthought_mayavi_mlab_plot3d1.jpg" src="_images/enthought_mayavi_mlab_plot3d1.jpg" style="width: 153.0px; height: 113.0px;" /></a>
</li>
</ul>
</td><td><ul>
<li><p class="first"><a class="reference internal" href="auto/mlab_pipeline_sources.html#mayavi.tools.pipeline.triangular_mesh_source" title="mayavi.tools.pipeline.triangular_mesh_source"><tt class="xref py py-func docutils literal"><span class="pre">triangular_mesh_source()</span></tt></a> (creates an <a class="reference internal" href="data.html#poly-data"><em>PolyData</em></a>)</p>
<a class="reference internal image-reference" href="_images/poly_data.jpg"><img alt="_images/poly_data.jpg" src="_images/poly_data.jpg" style="width: 152.0px; height: 121.6px;" /></a>
</li>
</ul>
</td></tr></table>
</td>
</tr>
</tbody>
</table>
<p>All the <cite>mlab.pipline</cite> source factories are functions that take numpy
arrays and return the Mayavi source object that was added to the
pipeline. However, the implicitly-connected sources require well-shaped
arrays as arguments: the data is supposed to lie on a regular,
orthogonal, grid of the same shape as the shape of the input array, in
other words, the array describes an image, possibly 3 dimensional.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">More complicated data structures can be created, such as irregular
grids or non-orthogonal grid. See
<a class="reference internal" href="data.html#data-structures-used-by-mayavi"><em>the section on data structures</em></a>.</p>
</div>
</div>
<div class="section" id="modules-and-filters">
<h3>Modules and filters<a class="headerlink" href="#modules-and-filters" title="Permalink to this headline">¶</a></h3>
<p>For each Mayavi module or filter (see <a class="reference internal" href="modules.html#modules"><em>Modules</em></a> and <a class="reference internal" href="filters.html#filters"><em>Filters</em></a>),
there is a corresponding <cite>mlab.pipeline</cite> function. The name of this
function is created by replacing the alternating capitals in the module
or filter name by underscores. Thus <cite>ScalarCutPlane</cite> corresponds to
<cite>scalar_cut_plane</cite>.</p>
<p>In general, the <cite>mlab.pipeline</cite> module and filter factory functions
simply create and connect the corresponding object. However they can also
contain addition logic, exposed as keyword arguments. For instance they
allow to set up easily a colormap, or to specify the color of the module,
when relevant. In accordance with the goal of the <cite>mlab</cite> interface to
make frequent operations simple, they use the keyword arguments to choose
the properties of the created object to suit the requirements. It can
be thus easier to use the keyword arguments, when available, than to set
the attributes of the objects created. For more information, please check
out the docstrings. Full, detailed, usage examples are given in the next
subsection.</p>
</div>
</div>
<div class="section" id="case-studies-of-some-visualizations">
<span id="mlab-case-studies"></span><h2><a class="toc-backref" href="#id12">Case studies of some visualizations</a><a class="headerlink" href="#case-studies-of-some-visualizations" title="Permalink to this headline">¶</a></h2>
<div class="section" id="visualizing-volumetric-scalar-data">
<h3>Visualizing volumetric scalar data<a class="headerlink" href="#visualizing-volumetric-scalar-data" title="Permalink to this headline">¶</a></h3>
<p>There are three main ways of visualizing a 3D scalar field. Given the
following field:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ogrid</span><span class="p">[</span><span class="o">-</span><span class="mi">10</span><span class="p">:</span><span class="mi">10</span><span class="p">:</span><span class="mi">20j</span><span class="p">,</span> <span class="o">-</span><span class="mi">10</span><span class="p">:</span><span class="mi">10</span><span class="p">:</span><span class="mi">20j</span><span class="p">,</span> <span class="o">-</span><span class="mi">10</span><span class="p">:</span><span class="mi">10</span><span class="p">:</span><span class="mi">20j</span><span class="p">]</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="o">*</span><span class="n">y</span><span class="o">*</span><span class="n">z</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">x</span><span class="o">*</span><span class="n">y</span><span class="o">*</span><span class="n">z</span><span class="p">)</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Iso-Surfaces:</th><td class="field-body"><p class="first">To display iso surfaces of the field, the simplest solution is
simply to use the <cite>mlab</cite> <a class="reference internal" href="auto/mlab_helper_functions.html#mayavi.mlab.contour3d" title="mayavi.mlab.contour3d"><tt class="xref py py-func docutils literal"><span class="pre">contour3d()</span></tt></a> function:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">mlab</span><span class="o">.</span><span class="n">contour3d</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</pre></div>
</div>
<p><img alt="volumetric_contour3d" src="_images/volumetric_contour3d.jpg" /></p>
<p>The problem with this method is that the outer iso-surfaces tend to hide inner
ones. As a result, quite often only one iso-surface can be visible.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Volume rendering:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><p class="first">Volume rendering is an advanced technique in which each voxel is
given a partly transparent color. This can be achieved with
<cite>mlab.pipeline</cite> using the <a class="reference internal" href="auto/mlab_pipeline_sources.html#mayavi.tools.pipeline.scalar_field" title="mayavi.tools.pipeline.scalar_field"><tt class="xref py py-func docutils literal"><span class="pre">scalar_field()</span></tt></a> source, and the
<cite>volume</cite> module:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">mlab</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">volume</span><span class="p">(</span><span class="n">mlab</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">scalar_field</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
</pre></div>
</div>
<p><img alt="volumetric_volume" src="_images/volumetric_volume.jpg" /></p>
<p>For such a visualization, tweaking the opacity transfer function is
critical to achieve a good effect. Typically, it can be useful to
limit the lower and upper values to the 20 and 80 percentiles of the
data, in order to have a reasonable fraction of the volume
transparent:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">mlab</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">volume</span><span class="p">(</span><span class="n">mlab</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">scalar_field</span><span class="p">(</span><span class="n">s</span><span class="p">),</span> <span class="n">vmin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mf">0.8</span><span class="p">)</span>
</pre></div>
</div>
<p><img alt="volumetric_volume_tweaked" src="_images/volumetric_volume_tweaked.jpg" /></p>
<p>It is useful to open the module&#8217;s dialog (eg through the pipeline
interface, or using it&#8217;s <cite>edit_traits()</cite> method) and tweak the color
transfer function to render the transparent low-intensity regions
of the image. <strong>For this module, the LUT as defined in the `Colors and
legends` node are not used</strong></p>
<p>The limitations of volume rendering is that, while it is often very
pretty, it can be difficult to analyze the details of the field with
it.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Cut planes:</th><td class="field-body"><p class="first">While less impressive, cut planes are a very informative way of
visualizing the details of a scalar field:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">mlab</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">image_plane_widget</span><span class="p">(</span><span class="n">mlab</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">scalar_field</span><span class="p">(</span><span class="n">s</span><span class="p">),</span>
                            <span class="n">plane_orientation</span><span class="o">=</span><span class="s">&#39;x_axes&#39;</span><span class="p">,</span>
                            <span class="n">slice_index</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
                        <span class="p">)</span>
<span class="n">mlab</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">image_plane_widget</span><span class="p">(</span><span class="n">mlab</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">scalar_field</span><span class="p">(</span><span class="n">s</span><span class="p">),</span>
                            <span class="n">plane_orientation</span><span class="o">=</span><span class="s">&#39;y_axes&#39;</span><span class="p">,</span>
                            <span class="n">slice_index</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
                        <span class="p">)</span>
<span class="n">mlab</span><span class="o">.</span><span class="n">outline</span><span class="p">()</span>
</pre></div>
</div>
<p><img alt="volumetric_cut_plane" src="_images/volumetric_cut_plane.jpg" /></p>
<p>The image plane widget can only be used on regular-spaced data, as
created by <cite>mlab.pipeline.scalar_field</cite>, but it is very fast. It
should thus be prefered to the scalar cut plane, when possible.</p>
<p>Clicking and dragging the cut plane is an excellent way of exploring
the field.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">A combination of techniques:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><p class="first">Finally, it can be interesting to combine cut planes with
iso-surfaces and thresholding to give a view of the peak areas using
the iso-surfaces, visualize the details of the field with the cut
plane, and the global mass with a large iso-surface:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">src</span> <span class="o">=</span> <span class="n">mlab</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">scalar_field</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="n">mlab</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">iso_surface</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">contours</span><span class="o">=</span><span class="p">[</span><span class="n">s</span><span class="o">.</span><span class="n">min</span><span class="p">()</span><span class="o">+</span><span class="mf">0.1</span><span class="o">*</span><span class="n">s</span><span class="o">.</span><span class="n">ptp</span><span class="p">(),</span> <span class="p">],</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span>
<span class="n">mlab</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">iso_surface</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">contours</span><span class="o">=</span><span class="p">[</span><span class="n">s</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">-</span><span class="mf">0.1</span><span class="o">*</span><span class="n">s</span><span class="o">.</span><span class="n">ptp</span><span class="p">(),</span> <span class="p">],)</span>
<span class="n">mlab</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">image_plane_widget</span><span class="p">(</span><span class="n">src</span><span class="p">,</span>
                            <span class="n">plane_orientation</span><span class="o">=</span><span class="s">&#39;z_axes&#39;</span><span class="p">,</span>
                            <span class="n">slice_index</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
                        <span class="p">)</span>
</pre></div>
</div>
<p><img alt="volumetric_combination" src="_images/volumetric_combination.jpg" /></p>
<p class="last">In some cases, though not in our example, it might be usable to
insert a threshold filter before the cut plane, eg:to remove area
with values below &#8216;s.min()+0.1*s.ptp()&#8217;. In this case, the cut plane
needs to be implemented with <cite>mlab.pipeline.scalar_cut_plane</cite> as the data
looses its structure after thresholding.</p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="visualizing-a-vector-field">
<h3>Visualizing a vector field<a class="headerlink" href="#visualizing-a-vector-field" title="Permalink to this headline">¶</a></h3>
<p>A vector field, i.e., vectors continuously defined in a volume, can be
difficult to visualize, as it contains a lot of information. Let us
explore different visualizations for the velocity field of a multi-axis
convection cell <a class="footnote-reference" href="#id4" id="id3">[1]</a>, in hydrodynamics, as defined by its components
sampled on a grid, <cite>u</cite>, <cite>v</cite>, <cite>w</cite>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mgrid</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">1</span><span class="p">:</span><span class="mi">20j</span><span class="p">,</span> <span class="mi">0</span><span class="p">:</span><span class="mi">1</span><span class="p">:</span><span class="mi">20j</span><span class="p">,</span> <span class="mi">0</span><span class="p">:</span><span class="mi">1</span><span class="p">:</span><span class="mi">20j</span><span class="p">]</span>

<span class="n">u</span> <span class="o">=</span>    <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="n">x</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="n">z</span><span class="p">)</span>
<span class="n">v</span> <span class="o">=</span> <span class="o">-</span><span class="mi">2</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="n">y</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="n">z</span><span class="p">)</span>
<span class="n">w</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="n">x</span><span class="p">)</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="n">z</span><span class="p">)</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="n">y</span><span class="p">)</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="n">z</span><span class="p">)</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Quiver:</th><td class="field-body"><p class="first">The simplest visualization of a set of vectors, is using the <cite>mlab</cite>
function <cite>quiver3d</cite>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">mlab</span><span class="o">.</span><span class="n">quiver3d</span><span class="p">(</span><span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">w</span><span class="p">)</span>
<span class="n">mlab</span><span class="o">.</span><span class="n">outline</span><span class="p">()</span>
</pre></div>
</div>
<img alt="_images/vector_field_quiver.jpg" src="_images/vector_field_quiver.jpg" />
<p>The main limitation of this visualization is that it positions an
arrow for each sampling point on the grid. As a result the
visualization is very busy.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Masking vectors:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><p class="first">We can use the fact that we are visualizing a vector field, and not
just a bunch of vectors, to reduce the amount of arrows displayed. For
this we need to build a <cite>vector_field</cite> source, and apply to it the
<cite>vectors</cite> module, with some masking parameters (here we keep only one
point out of 20):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">src</span> <span class="o">=</span> <span class="n">mlab</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">vector_field</span><span class="p">(</span><span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">w</span><span class="p">)</span>
<span class="n">mlab</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">vectors</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">mask_points</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">scale_factor</span><span class="o">=</span><span class="mf">3.</span><span class="p">)</span>
</pre></div>
</div>
<img alt="_images/vector_field_vectors.jpg" src="_images/vector_field_vectors.jpg" />
</td>
</tr>
<tr class="field-odd field"><th class="field-name">A cut plane:</th><td class="field-body"><p class="first">If we are interested in displaying the vectors along a cut, we can
use a cut plane. In particular, we can inspect interactively the
vector field by moving the cut plane along: clicking on it and
dragging it can give a very clear understanding of the vector field:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">mlab</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">vector_cut_plane</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">mask_points</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">scale_factor</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
<img alt="_images/vector_field_cut_plane.jpg" src="_images/vector_field_cut_plane.jpg" />
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Iso-Surfaces of the magnitude:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><p class="first">An important parameter of the vector field is its magnitude. It can
be interesting to display iso-surfaces of the normal of the vectors.
For this we can create a scalar field from the vector field using the
ExtractVectorNorm filter, and use the Iso-Surface module on it. When
working interactively, a good understanding of the magnitude of the
field can be gained by changing the values of the contours in the
object&#8217;s property dialog.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">magnitude</span> <span class="o">=</span> <span class="n">mlab</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">extract_vector_norm</span><span class="p">(</span><span class="n">src</span><span class="p">)</span>
<span class="n">mlab</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">iso_surface</span><span class="p">(</span><span class="n">magnitude</span><span class="p">,</span> <span class="n">contours</span><span class="o">=</span><span class="p">[</span><span class="mf">1.9</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">])</span>
</pre></div>
</div>
<img alt="_images/vector_field_isosurface.jpg" src="_images/vector_field_isosurface.jpg" />
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">The Flow, or the field lines:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><p class="first">For certain vector fields, the line of flow along the field can
have an interesting meaning. For instance this can be interpreted as a
trajectory in hydrodynamics, or field lines in electro-magnetism.
We can display the flow lines originating for a certain seed surface
using the <cite>streamline</cite> module, or the mlab <a class="reference internal" href="auto/mlab_helper_functions.html#mayavi.mlab.flow" title="mayavi.mlab.flow"><tt class="xref py py-func docutils literal"><span class="pre">flow()</span></tt></a> function,
which relies on <cite>streamline</cite> internally:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">flow</span> <span class="o">=</span> <span class="n">mlab</span><span class="o">.</span><span class="n">flow</span><span class="p">(</span><span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">seed_scale</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                          <span class="n">seed_resolution</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
                          <span class="n">integration_direction</span><span class="o">=</span><span class="s">&#39;both&#39;</span><span class="p">)</span>
</pre></div>
</div>
<img alt="_images/vector_field_flow.jpg" src="_images/vector_field_flow.jpg" />
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">A combination of techniques:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><p class="first">Giving a meaningful visualization of a vector field is a hard task,
and one must use all the tools at hand to illustrate his purposes. It
is important to choose the message conveyed. No one visualization
will tell all about a vector field. Here is an example of a
visualization made by combining the different tools above:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">mlab</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">fgcolor</span><span class="o">=</span><span class="p">(</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">),</span> <span class="n">bgcolor</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
<span class="n">src</span> <span class="o">=</span> <span class="n">mlab</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">vector_field</span><span class="p">(</span><span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">w</span><span class="p">)</span>
<span class="n">magnitude</span> <span class="o">=</span> <span class="n">mlab</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">extract_vector_norm</span><span class="p">(</span><span class="n">src</span><span class="p">)</span>

<span class="c"># We apply the following modules on the magnitude object, in order to</span>
<span class="c"># be able to display the norm of the vectors, eg as the color.</span>
<span class="n">iso</span> <span class="o">=</span> <span class="n">mlab</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">iso_surface</span><span class="p">(</span><span class="n">magnitude</span><span class="p">,</span> <span class="n">contours</span><span class="o">=</span><span class="p">[</span><span class="mf">1.9</span><span class="p">,</span> <span class="p">],</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>

<span class="n">vec</span> <span class="o">=</span> <span class="n">mlab</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">vectors</span><span class="p">(</span><span class="n">magnitude</span><span class="p">,</span> <span class="n">mask_points</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span>
                                    <span class="n">line_width</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                                    <span class="n">color</span><span class="o">=</span><span class="p">(</span><span class="o">.</span><span class="mi">8</span><span class="p">,</span> <span class="o">.</span><span class="mi">8</span><span class="p">,</span> <span class="o">.</span><span class="mi">8</span><span class="p">),</span>
                                    <span class="n">scale_factor</span><span class="o">=</span><span class="mf">4.</span><span class="p">)</span>

<span class="n">flow</span> <span class="o">=</span> <span class="n">mlab</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">streamline</span><span class="p">(</span><span class="n">magnitude</span><span class="p">,</span> <span class="n">seedtype</span><span class="o">=</span><span class="s">&#39;plane&#39;</span><span class="p">,</span>
                                        <span class="n">seed_visible</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                                        <span class="n">seed_scale</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
                                        <span class="n">seed_resolution</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                                        <span class="n">linetype</span><span class="o">=</span><span class="s">&#39;ribbon&#39;</span><span class="p">,)</span>

<span class="n">vcp</span> <span class="o">=</span> <span class="n">mlab</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">vector_cut_plane</span><span class="p">(</span><span class="n">magnitude</span><span class="p">,</span> <span class="n">mask_points</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
                                        <span class="n">scale_factor</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
                                        <span class="n">colormap</span><span class="o">=</span><span class="s">&#39;jet&#39;</span><span class="p">,</span>
                                        <span class="n">plane_orientation</span><span class="o">=</span><span class="s">&#39;x_axes&#39;</span><span class="p">)</span>
</pre></div>
</div>
<img alt="_images/vector_field_combination.jpg" class="last" src="_images/vector_field_combination.jpg" />
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Although most of this section has been centered on snippets of code
to create visualization objects, it is important to remember that
Mayavi is an interactive program, and that the properties of these
objects can be modified interactively, as described in
<a class="reference internal" href="mlab_changing_object_looks.html#mlab-changing-objects-interactively"><em>Changing object properties interactively</em></a>. It is often
impossible to choose the best parameters for a visualization before
hand. Colors, contour values, colormap, view angle, etc... should be
chosen interactively. If reproducibiles are required, the chosen
values can be added in the original script.</p>
<p class="last">Moreover, the <cite>mlab</cite> functions expose only a small fraction of the
possibilities of the visualization objects. The dialogs expose more
of these functionalities, that are entirely controlled by the
attributes of the objects returned by the mlab functions. These
objects are very rich, as they are built from VTK objects. It can be
hard to find the right attribute to modify when exploring them, or in
the VTK documentation, thus the easiest way is to modify them
interactively using the pipeline view dialog and use
the <a class="reference internal" href="mlab_changing_object_looks.html#record-feature"><em>record feature</em></a> to find out the
corresponding lines of code. See
<a class="reference internal" href="pipeline.html#organisation-mayavi-visualisations"><em>Organisation of Mayavi visualizations: the pipeline</em></a> to understand better the
link between the lines of code generated by the record feature and
<cite>mlab</cite>.
.</p>
</div>
<hr class="docutils" />
<table class="docutils footnote" frame="void" id="id4" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id3">[1]</a></td><td>Toussaint, V.; Carriere, P. &amp; Raynal, F. A numerical Eulerian
approach to mixing by chaotic advection Phys. Fluids, 1995, 7, 2587</td></tr>
</tbody>
</table>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/mayavi-logo.png" alt="Logo"/>
            </a></p>
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#"><tt class="docutils literal"><span class="pre">mlab</span></tt>: Python scripting for 3D plotting</a><ul>
<li><a class="reference internal" href="#a-demo">A demo</a></li>
<li><a class="reference internal" href="#d-plotting-functions-for-numpy-arrays">3D Plotting functions for numpy arrays</a><ul>
<li><a class="reference internal" href="#d-and-1d-data">0D and 1D data</a></li>
<li><a class="reference internal" href="#d-data">2D data</a></li>
<li><a class="reference internal" href="#id1">3D data</a></li>
</ul>
</li>
<li><a class="reference internal" href="#changing-the-looks-of-the-visual-objects-created">Changing the looks of the visual objects created</a><ul>
<li><a class="reference internal" href="#adding-color-or-size-variations">Adding color or size variations</a></li>
<li><a class="reference internal" href="#changing-the-scale-and-position-of-objects">Changing the scale and position of objects</a></li>
<li><a class="reference internal" href="#changing-object-properties-interactively">Changing object properties interactively</a></li>
</ul>
</li>
<li><a class="reference internal" href="#figures-legends-camera-and-decorations">Figures, legends, camera and decorations</a><ul>
<li><a class="reference internal" href="#handling-several-figures">Handling several figures</a></li>
<li><a class="reference internal" href="#figure-decorations">Figure decorations</a></li>
<li><a class="reference internal" href="#moving-the-camera">Moving the camera</a></li>
</ul>
</li>
<li><a class="reference internal" href="#running-mlab-scripts">Running mlab scripts</a><ul>
<li><a class="reference internal" href="#using-mlab-interactively">Using mlab interactively</a></li>
<li><a class="reference internal" href="#using-together-with-matplotlib-s-pylab">Using together with Matplotlib&#8217;s pylab</a></li>
<li><a class="reference internal" href="#in-scripts">In scripts</a></li>
</ul>
</li>
<li><a class="reference internal" href="#animating-the-data">Animating the data</a></li>
<li><a class="reference internal" href="#assembling-pipelines-with-mlab">Assembling pipelines with <cite>mlab</cite></a><ul>
<li><a class="reference internal" href="#data-sources">Data sources</a></li>
<li><a class="reference internal" href="#modules-and-filters">Modules and filters</a></li>
</ul>
</li>
<li><a class="reference internal" href="#case-studies-of-some-visualizations">Case studies of some visualizations</a><ul>
<li><a class="reference internal" href="#visualizing-volumetric-scalar-data">Visualizing volumetric scalar data</a></li>
<li><a class="reference internal" href="#visualizing-a-vector-field">Visualizing a vector field</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="filters.html"
                        title="previous chapter">Filters</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="advanced_use.html"
                        title="next chapter">Advanced use of Mayavi</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/mlab.txt"
           rel="nofollow">Show Source</a></li>
  </ul>

<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
    <div id="searchbox">
	<h3>Google Search</h3>
    <form method="get" action="http://www.google.com/search">

    <table border="0" cellpadding="0">
    <tr><td>
    <input type="text"   name="q" size="20"
    maxlength="255" value="" />
    <input type="submit" value="Go" /></td></tr>
    <tr><td align="center" style="font-size:75%; color: #FFFFFF;">
    <input type="checkbox"  name="sitesearch"
    value="http://github.enthought.com/mayavi/mayavi/" checked /> only search Mayavi documentation<br />
    </td></tr></table>

    </form>
    </div>
    <hr/>
    <div id="searchbox">
	<a href="http://github.enthought.com/mayavi/mayavi/misc.html#citing-mayavi"><h3>Citing Mayavi</h3></a>

	<p style="font-size:85%; color: #FFFFFF;">
    	If you publish articles using Mayavi, please 
	<strong><a href="misc.html#citing-mayavi">cite
	Mayavi</a></strong>. We need
	these citations to justify time and resources on the software.
	</p>
    </div>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="advanced_use.html" title="Advanced use of Mayavi"
             >next</a> |</li>
        <li class="right" >
          <a href="filters.html" title="Filters"
             >previous</a> |</li>
        <li><a href="index.html">mayavi 4.3.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2008-2014, Prabhu Ramachandran, Gaël Varoquaux.
      Last updated on Jan 30, 2014.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.2.
    </div>
  </body>
</html>